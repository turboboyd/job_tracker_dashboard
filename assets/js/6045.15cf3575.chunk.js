"use strict";(self.webpackChunkjob_tracker_dashboard=self.webpackChunkjob_tracker_dashboard||[]).push([[6045],{9216(e,t,s){s.d(t,{e:()=>u});var r=s(29189),n=s(96540),o=s(22022),a=s(55689),i=s(73431),l=s(30537);const d="dashboard:loops-filter:v1";function c(e){if(e&&"function"==typeof e.toMillis)return e.toMillis();if("number"==typeof e)return e;if("string"==typeof e){const t=Date.parse(e);return Number.isFinite(t)?t:0}const t=e?.seconds;return"number"==typeof t?1e3*t:0}function u(){const{t:e}=(0,o.Bd)(void 0,{keyPrefix:"dashboard"}),{userId:t}=(0,a.gv)(),s=(0,i.fZ)(t?void 0:r.hT).data??[],[u,m]=(0,n.useState)(()=>function(e){try{if(!e)return{mode:"all"};const t=JSON.parse(e);if(!t||"object"!=typeof t)return{mode:"all"};const s=t;if("all"===s.mode)return{mode:"all"};if("selected"===s.mode&&Array.isArray(s.selectedLoopIds))return{mode:"selected",selectedLoopIds:s.selectedLoopIds.filter(e=>"string"==typeof e)}}catch{}return{mode:"all"}}("undefined"!=typeof window?window.localStorage.getItem(d):null));(0,n.useEffect)(()=>{try{window.localStorage.setItem(d,JSON.stringify(u))}catch{}},[u]);const f=(0,l.g5)(t?void 0:r.hT),x=(0,n.useMemo)(()=>f.data??[],[f.data]),p=f.isLoading,h=f.error?e("loadError","Failed to load matches"):null,b=(0,n.useMemo)(()=>{if("all"===u.mode)return x;const e=new Set(u.selectedLoopIds);return x.filter(t=>t.loopId&&e.has(t.loopId))},[x,u]),g=(0,n.useMemo)(()=>function(e){const t={};let s=0;for(const r of e)s+=1,t[r]=(t[r]??0)+1;return{total:s,byStatus:t}}(b.map(e=>{return"string"==typeof(t=e.status)&&t.trim().length>0?t.trim().toLowerCase():"unknown";var t})),[b]),j=g.total>0,v=(0,n.useMemo)(()=>{const e=b.map(e=>({id:e.id,title:e.title??null,company:e.company??null,status:e.status,createdAt:e.createdAt}));return e.sort((e,t)=>c(t.createdAt)-c(e.createdAt)),e.slice(0,5)},[b]),w=(0,n.useMemo)(()=>b.flatMap(e=>{const t=function(e){if("string"!=typeof e)return null;const t=e.trim().toLowerCase();return"new"===t||"saved"===t||"applied"===t||"interview"===t||"offer"===t||"rejected"===t?t:null}(e.status);return t?[{status:t,createdAt:e.createdAt,updatedAt:e.updatedAt,loopId:e.loopId}]:[]}),[b]),y=(0,n.useMemo)(()=>function(e,t){const s=e=>t[e]??0;return{total:e,new:s("new"),applied:s("applied"),saved:s("saved"),interview:s("interview"),offer:s("offer"),rejected:s("rejected")}}(g.total,g.byStatus),[g]);return{userId:t,loops:s,loopsFilter:u,setLoopsFilter:m,matches:b,matchesAll:x,chartMatches:w,isLoading:p,error:h,hasMatches:j,recentJobs:v,recent:v,pipelineSummary:y}}},84778(e,t,s){s.d(t,{Ev:()=>H,$1:()=>v,Ze:()=>g,ny:()=>p,QK:()=>b,GZ:()=>u,fp:()=>Q,Se:()=>y,kW:()=>K,zj:()=>E});var r=s(22022),n=s(68701),o=s(97234),a=s(96540),i=s(74848);const l={user:"ðŸ‘¤",question:"â“",loop:"ðŸ”",add:"âž•",total:"ðŸ”—",new:"ðŸ†•",applied:"ðŸ“„",saved:"ðŸ”„",interview:"âœ‰ï¸",offer:"ðŸŽ‰",rejected:"âš ï¸"},d={user:"text-foreground",question:"text-foreground",loop:"text-foreground",add:"text-foreground",total:"text-foreground",new:"text-slate-700 dark:text-slate-200",applied:"text-blue-600 dark:text-blue-400",saved:"text-amber-600 dark:text-amber-400",interview:"text-purple-600 dark:text-purple-400",offer:"text-emerald-600 dark:text-emerald-400",rejected:"text-red-600 dark:text-red-400"};function c({name:e,size:t=18,className:s,title:r}){return(0,i.jsx)("span",{"aria-hidden":!r||void 0,title:r,style:{fontSize:t},className:["leading-none",d[e],s??""].join(" ").trim(),children:l[e]})}function u({isLoading:e,error:t,summary:s,onGoJobs:a,onAddFirstJob:l}){const{t:d}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"});return e?(0,i.jsx)(o.Z,{padding:"md",className:"rounded-3xl",children:(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loadingâ€¦"})}):t?(0,i.jsxs)(o.Z,{padding:"md",className:"rounded-3xl",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-foreground",children:"Couldnâ€™t load jobs"}),(0,i.jsx)("div",{className:"mt-1 text-sm text-muted-foreground",children:t})]}):0===s.total?(0,i.jsxs)(o.Z,{padding:"md",className:"rounded-3xl",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("div",{className:"text-base font-semibold text-foreground",children:d("stats.empty.title","Add your first job")}),(0,i.jsx)("div",{className:"mt-1 text-sm text-muted-foreground",children:d("stats.empty.subtitle","Start tracking your applications â€” your statistics will appear here.")})]}),(0,i.jsx)(n.$n,{variant:"outline",shadow:"sm",onClick:l,children:d("stats.empty.cta","Add job")})]}),(0,i.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3 sm:grid-cols-5",children:[(0,i.jsx)(m,{label:d("status.new","New"),value:0}),(0,i.jsx)(m,{label:d("status.applied","Applied"),value:0}),(0,i.jsx)(m,{label:d("status.interview","Interview"),value:0}),(0,i.jsx)(m,{label:d("status.offer","Offer"),value:0}),(0,i.jsx)(m,{label:d("status.rejected","Rejected"),value:0})]})]}):(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("div",{className:"text-lg font-semibold text-foreground",children:d("stats.title","Statistics")}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:[(0,i.jsx)(n.rk,{onClick:()=>a?.("new"),children:(0,i.jsx)(n.nO,{title:d("status.new","New"),value:s.new,icon:(0,i.jsx)(c,{name:"new"})})}),(0,i.jsx)(n.rk,{onClick:()=>a?.("applied"),children:(0,i.jsx)(n.nO,{title:d("status.applied","Applied"),value:s.applied,icon:(0,i.jsx)(c,{name:"applied"})})}),(0,i.jsx)(n.rk,{onClick:()=>a?.("interview"),children:(0,i.jsx)(n.nO,{title:d("status.interview","Interview"),value:s.interview,icon:(0,i.jsx)(c,{name:"interview"})})}),(0,i.jsx)(n.rk,{onClick:()=>a?.("offer"),children:(0,i.jsx)(n.nO,{title:d("status.offer","Offer"),value:s.offer,icon:(0,i.jsx)(c,{name:"offer"})})}),(0,i.jsx)(n.rk,{onClick:()=>a?.("rejected"),children:(0,i.jsx)(n.nO,{title:d("status.rejected","Rejected"),value:s.rejected,icon:(0,i.jsx)(c,{name:"rejected"})})})]})]})}function m({label:e,value:t}){return(0,i.jsxs)("div",{className:"rounded-lg border border-border bg-background p-3",children:[(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:e}),(0,i.jsx)("div",{className:"mt-1 text-lg font-semibold text-foreground",children:t})]})}var f=s(3433),x=s(3626);function p({summary:e,size:t=240,stroke:s=16}){const{t:a}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),l=e.new+e.applied+e.interview+e.offer+e.rejected;return(0,i.jsxs)(o.Z,{padding:"md",className:"rounded-3xl",children:[(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(n.V6,{title:a("pipeline.title","Applications pipeline"),totalLabel:a("pipeline.totalLabel","In pipeline"),centerTop:`${l}`,centerBottom:a("pipeline.centerBottom","of {{total}} total",{total:e.total}),size:t,stroke:s,slices:[{label:a("status.new","New"),value:e.new,className:"stroke-sky-500"},{label:a("status.applied","Applied"),value:e.applied,className:"stroke-blue-500"},{label:a("status.interview","Interview"),value:e.interview,className:"stroke-purple-500"},{label:a("status.offer","Offer"),value:e.offer,className:"stroke-emerald-500"},{label:a("status.rejected","Rejected"),value:e.rejected,className:"stroke-red-500"}]})}),(0,i.jsxs)("div",{className:"mt-4 rounded-2xl border border-border bg-background p-3",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-foreground",children:a("pipeline.profileCta.title","Improve your results")}),(0,i.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:a("pipeline.profileCta.subtitle","Fill out your profile so we can tailor your applications.")}),(0,i.jsx)(f.N_,{to:x.RU[x.Sb.SETTINGS_PROFILE],className:"mt-3 inline-flex items-center justify-center rounded-full border border-border bg-background px-3 py-1.5 text-xs font-medium text-foreground shadow-sm transition-colors hover:bg-muted",children:a("pipeline.profileCta.button","Complete profile")})]})]})}function h(e){switch(e){case"new":return"border-sky-200 bg-sky-50 text-sky-700 dark:border-sky-900/50 dark:bg-sky-950/40 dark:text-sky-200";case"saved":return"border-amber-200 bg-amber-50 text-amber-700 dark:border-amber-900/50 dark:bg-amber-950/40 dark:text-amber-200";case"applied":return"border-blue-200 bg-blue-50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/40 dark:text-blue-200";case"interview":return"border-purple-200 bg-purple-50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/40 dark:text-purple-200";case"offer":return"border-emerald-200 bg-emerald-50 text-emerald-700 dark:border-emerald-900/50 dark:bg-emerald-950/40 dark:text-emerald-200";case"rejected":return"border-red-200 bg-red-50 text-red-700 dark:border-red-900/50 dark:bg-red-950/40 dark:text-red-200";default:return"border-border bg-muted text-foreground"}}function b({jobs:e,onViewAll:t,onOpenJob:s,className:l}){const{t:d}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),[c]=(0,a.useState)(()=>Date.now()),u=(e,t,s)=>String(d(e,{defaultValue:t,...s??{}}));return(0,i.jsxs)(o.Z,{padding:"md",className:["flex h-full flex-col rounded-3xl",l].filter(Boolean).join(" "),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"text-base font-semibold text-foreground",children:u("recent.title","Recent applications")}),(0,i.jsx)(n.$n,{variant:"link",className:"px-0",onClick:t,children:u("recent.viewAll","View all")})]}),0===e.length?(0,i.jsx)("div",{className:"mt-3 text-sm text-muted-foreground",children:u("recent.empty","No applications yet. Add your first one to see activity here.")}):(0,i.jsx)("div",{className:"mt-4 flex-1 space-y-2 overflow-y-auto pr-1",children:e.map(e=>{const r=function(e,t,s){if(!t)return null;const r=s-t;if(r<0)return e("recent.time.justNow","just now");const n=Math.floor(r/1e3);if(n<60)return e("recent.time.justNow","just now");const o=Math.floor(n/60);if(o<60)return e("recent.time.minutesAgo","{{count}}m ago",{count:o});const a=Math.floor(o/60);if(a<24)return e("recent.time.hoursAgo","{{count}}h ago",{count:a});const i=Math.floor(a/24);if(i<7)return e("recent.time.daysAgo","{{count}}d ago",{count:i});const l=Math.floor(i/7);if(l<5)return e("recent.time.weeksAgo","{{count}}w ago",{count:l});const d=Math.floor(i/30);return d<12?e("recent.time.monthsAgo","{{count}}mo ago",{count:d}):e("recent.time.yearsAgo","{{count}}y ago",{count:Math.floor(i/365)})}(u,function(e){if(!e)return null;if("function"==typeof e.toMillis)return e.toMillis();if("number"==typeof e)return e;const t=e.seconds;return"number"==typeof t?1e3*t:null}(e.createdAt),c),n=function(e){const t="string"==typeof e?e.trim().toLowerCase():"";return"new"===t?"new":"saved"===t?"saved":"applied"===t?"applied":"interview"===t?"interview":"offer"===t?"offer":"rejected"===t?"rejected":"unknown"}(e.status),o="unknown"===n?u("status.unknown","Unknown"):u(`status.${n}`,n);return(0,i.jsx)("button",{type:"button",onClick:()=>s?s(e.id):t(),className:["w-full text-left","rounded-lg border border-border bg-background p-3","transition-colors","hover:bg-muted","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border","cursor-pointer"].join(" "),children:(0,i.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("div",{className:"truncate text-sm font-medium text-foreground",children:e.title||u("recent.untitled","Untitled role")}),(0,i.jsx)("div",{className:"truncate text-xs text-muted-foreground",children:e.company||u("recent.company","Company")})]}),(0,i.jsxs)("div",{className:"shrink-0 text-right",children:[(0,i.jsx)("div",{className:["inline-flex rounded-full border px-2 py-0.5 text-xs font-medium",h(n)].join(" "),children:o}),r&&(0,i.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground",children:[u("recent.created","Created"),"Â ",r]})]})]})},e.id)})})]})}function g({hasJobs:e,onGoProfile:t,onGoQuestions:s,onGoLoop:o,onGoJobs:a,className:l}){const{t:d}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),u=d("common.go"),m=d("common.done");return(0,i.jsx)("div",{className:l,children:(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:max-w-[520px]",children:[(0,i.jsx)(n.bj,{icon:(0,i.jsx)(c,{name:"user"}),title:d("onboarding.setupProfile"),onGo:t,goText:u,doneText:m}),(0,i.jsx)(n.bj,{icon:(0,i.jsx)(c,{name:"question"}),title:d("onboarding.answerQuestions"),onGo:s,goText:u,doneText:m}),(0,i.jsx)(n.bj,{icon:(0,i.jsx)(c,{name:"loop"}),title:d("onboarding.startFirstLoop"),onGo:o,goText:u,doneText:m}),(0,i.jsx)(n.bj,{icon:(0,i.jsx)(c,{name:"add"}),title:d(e?"onboarding.addAnotherJob":"onboarding.addFirstJob"),onGo:a,goText:u,doneText:m})]})})}var j=s(99653);function v({open:e,onOpenChange:t,loops:s,value:o,onChange:l}){const{t:d}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),c="all"===o.mode,u=a.useMemo(()=>{return"selected"!==o.mode?[]:(e=o.selectedLoopIds,Array.from(new Set(e)));var e},[o]),m=a.useCallback(()=>{l({mode:"all"})},[l]),f=a.useCallback(()=>{l({mode:"selected",selectedLoopIds:u})},[l,u]),x=a.useCallback(e=>{const t=new Set(u);t.has(e)?t.delete(e):t.add(e),l({mode:"selected",selectedLoopIds:Array.from(t)})},[l,u]),p=a.useCallback(()=>{l({mode:"selected",selectedLoopIds:s.map(e=>e.id)})},[s,l]),h=a.useCallback(()=>{l({mode:"selected",selectedLoopIds:[]})},[l]);return(0,i.jsx)(n.aF,{open:e,onOpenChange:t,title:d("loopsFilter.title","Dashboard loops"),description:d("loopsFilter.desc","Choose which loops should be included in dashboard stats and recent jobs."),size:"md",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("label",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"radio",name:"dashboard-loops-filter",checked:c,onChange:m}),(0,i.jsx)("span",{className:"text-sm text-foreground",children:d("loopsFilter.all","All loops")})]}),(0,i.jsxs)("label",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"radio",name:"dashboard-loops-filter",checked:!c,onChange:f}),(0,i.jsx)("span",{className:"text-sm text-foreground",children:d("loopsFilter.selected","Only selected loops")})]})]}),c?null:(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,i.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:p,children:d("loopsFilter.selectAll","Select all")}),(0,i.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:h,children:d("loopsFilter.clear","Clear")}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[d("loopsFilter.selectedCount","Selected"),": ",u.length]})]}),(0,i.jsx)("div",{className:"rounded-xl border border-border bg-card",children:0===s.length?(0,i.jsx)("div",{className:"p-4 text-sm text-muted-foreground",children:d("loopsFilter.noLoops","No loops found.")}):(0,i.jsx)("ul",{className:"divide-y divide-border",children:s.map(e=>{const t=u.includes(e.id);return(0,i.jsx)("li",{className:"p-3",children:(0,i.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,i.jsx)("input",{type:"checkbox",checked:t,onChange:()=>x(e.id)}),(0,i.jsx)("span",{className:(0,j.xW)("text-sm",t?"text-foreground":"text-muted-foreground"),children:e.name})]})},e.id)})})})]}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(n.$n,{size:"sm",shape:"pill",onClick:()=>t(!1),children:d("common.done","Done")})})]})})}const w=[{to:x.RU[x.Sb.DASHBOARD],labelKey:"tabs.overview",fallback:"Overview",end:!0},{to:x.RU[x.Sb.DASHBOARD_ANALYTICS],labelKey:"tabs.analytics",fallback:"Analytics"},{to:x.RU[x.Sb.DASHBOARD_ACTIVITY],labelKey:"tabs.activity",fallback:"Activity"}];function y(){const{t:e}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"});return(0,i.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:w.map(t=>(0,i.jsx)(f.k2,{to:t.to,end:t.end,className:({isActive:e})=>["rounded-full border px-3 py-1 text-xs font-medium transition",e?"border-foreground/30 bg-muted text-foreground":"border-border text-muted-foreground hover:bg-muted/60"].join(" "),children:e(t.labelKey,t.fallback)},t.to))})}var N=s(74509);function k(e){if(null==e)return null;if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){const t=Date.parse(e);return Number.isFinite(t)?t:null}const t=e;if(t&&"function"==typeof t.toMillis){const e=t.toMillis();return"number"==typeof e&&Number.isFinite(e)?e:null}return t&&"number"==typeof t.seconds?Math.round(1e3*t.seconds):null}function A(e,t){const s=Math.abs(t-e);return Math.round(s/864e5)}function M(e){const t=e.filter(e=>Number.isFinite(e)).sort((e,t)=>e-t);if(0===t.length)return null;const s=Math.floor(t.length/2);return t.length%2==1?t[s]:Math.round((t[s-1]+t[s])/2)}function C(e){return"new"===e||"saved"===e||"applied"===e||"interview"===e||"offer"===e||"rejected"===e?e:"new"}function S(){return{new:0,saved:0,applied:0,interview:0,offer:0,rejected:0}}function T(e){const t=new Date(e);return t.setHours(0,0,0,0),t.getTime()}function F(e){const t=new Date(T(e)),s=(t.getDay()+6)%7;return t.setDate(t.getDate()-s),t.getTime()}function I(e,t){const s=new Date(e);return new Intl.DateTimeFormat(t,{month:"short",day:"2-digit"}).format(s)}function D(e,t){const s=new Date(e);return new Intl.DateTimeFormat(t,{month:"short"}).format(s)}function B(e,t){const s=new Date(e);return new Intl.DateTimeFormat(t,{month:"short",day:"2-digit"}).format(s)}const $=["applied","interview","offer","rejected"],L={applied:"sky",interview:"violet",offer:"emerald",rejected:"rose"},O={applied:"rgb(14 165 233)",interview:"rgb(139 92 246)",offer:"rgb(16 185 129)",rejected:"rgb(244 63 94)"};function U(e){const t=Number(e);return Number.isFinite(t)?t:0}function R(e,t,s){const r=new Date(e);return"12m"===s?new Intl.DateTimeFormat(t,{month:"short"}).format(r):"7d"===s?new Intl.DateTimeFormat(t,{weekday:"short"}).format(r):new Intl.DateTimeFormat(t,{day:"2-digit",month:"short"}).format(r)}function V({active:e,children:t,onClick:s}){return(0,i.jsx)("button",{type:"button",onClick:s,className:["inline-flex h-9 items-center justify-center rounded-full px-3 text-xs font-medium transition","outline-none focus:outline-none focus-visible:outline-none","focus-visible:ring-0 focus-visible:ring-offset-0",e?"bg-foreground/10 text-foreground":"text-muted-foreground hover:bg-foreground/5 hover:text-foreground"].join(" "),children:t})}function G({children:e}){return(0,i.jsx)("div",{className:"flex items-center gap-1 rounded-full border bg-background p-1",children:e})}function P(e){const{t}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),{active:s,payload:n,label:o}=e;if(!s||!n||0===n.length)return null;const a="string"==typeof o?o:String(o??""),l=n.filter(e=>$.includes(e.dataKey)).map(e=>{const s=e.dataKey;return{key:s,label:String(t(`status.${s}`,{defaultValue:s})),value:U(e.value)}}).sort((e,t)=>$.indexOf(e.key)-$.indexOf(t.key));return(0,i.jsxs)("div",{className:"min-w-[220px] rounded-xl border border-border bg-background/95 p-3 shadow-md backdrop-blur",children:[(0,i.jsx)("div",{className:"text-xs font-semibold text-foreground",children:a}),(0,i.jsx)("div",{className:"mt-2 space-y-2",children:l.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between gap-3 text-xs",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:O[e.key]}}),(0,i.jsx)("span",{className:"text-muted-foreground",children:e.label})]}),(0,i.jsx)("span",{className:"font-semibold text-foreground",children:e.value})]},e.key))})]})}function E({matches:e}){const{t,i18n:s}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),[o,l]=(0,a.useState)("90d"),[d,c]=(0,a.useState)("created"),u=(0,a.useMemo)(()=>{const t="updated"===d;return"12m"===o?function(e,t){const s=new Date;s.setHours(0,0,0,0);const r=new Date(s.getFullYear(),s.getMonth()+1,1).getTime(),n=new Date(s.getFullYear(),s.getMonth()-(t.months-1),1),o=n.getTime(),a=[];for(let e=0;e<t.months;e++){const s=new Date(n.getFullYear(),n.getMonth()+e,1),r=s.getTime(),o=new Date(s.getFullYear(),s.getMonth()+1,1).getTime();a.push({label:D(r,t.locale),startMs:r,endMs:o,counts:S()})}for(const s of e){const e=k(t.byUpdatedAt?s.updatedAt:s.createdAt);if(null==e)continue;if(e<o||e>=r)continue;const i=new Date(e),l=a[12*(i.getFullYear()-n.getFullYear())+(i.getMonth()-n.getMonth())];if(!l)continue;const d=C(s.status);l.counts[d]+=1}return a}(e,{months:12,byUpdatedAt:t,locale:s.language}):"7d"===o?function(e,t){const s=T(Date.now())+864e5,r=s-24*t.days*60*60*1e3,n=[];for(let e=0;e<t.days;e++){const s=r+24*e*60*60*1e3,o=s+864e5;n.push({label:I(s,t.locale),startMs:s,endMs:o,counts:S()})}for(const o of e){const e=k(t.byUpdatedAt?o.updatedAt:o.createdAt);if(null==e)continue;if(e<r||e>=s)continue;const a=n[Math.floor((T(e)-r)/864e5)];if(!a)continue;const i=C(o.status);a.counts[i]+=1}return n}(e,{days:7,byUpdatedAt:t,locale:s.language}):function(e,t){const s=F(Date.now())+6048e5,r=s-7*t.weeks*24*60*60*1e3,n=[];for(let e=0;e<t.weeks;e++){const s=r+7*e*24*60*60*1e3,o=s+6048e5;n.push({label:B(s,t.locale),startMs:s,endMs:o,counts:S()})}for(const o of e){const e=k(t.byUpdatedAt?o.updatedAt:o.createdAt);if(null==e)continue;if(e<r||e>=s)continue;const a=n[Math.floor((F(e)-r)/6048e5)];if(!a)continue;const i=C(o.status);a.counts[i]+=1}return n}(e,"30d"===o?{weeks:5,byUpdatedAt:t,locale:s.language}:{weeks:13,byUpdatedAt:t,locale:s.language})},[e,d,o,s.language]),m=(0,a.useMemo)(()=>u.map(e=>{const t=U(e.counts.applied),r=U(e.counts.interview),n=U(e.counts.offer),a=U(e.counts.rejected);return{date:R(e.startMs,s.language,o),applied:t,interview:r,offer:n,rejected:a}}),[u,s.language,o]),f=(0,a.useMemo)(()=>m.reduce((e,t)=>e+t.applied+t.interview+t.offer+t.rejected,0),[m]),x=(0,a.useMemo)(()=>`${String("updated"===d?t("trends.mode.updated",{defaultValue:"By last update"}):t("trends.mode.created",{defaultValue:"By creation date"}))} Â· ${String(t(`range.${o}`,{defaultValue:o}))}`,[d,o,t]),p=(0,a.useMemo)(()=>$.map(e=>({key:e,label:String(t(`status.${e}`,{defaultValue:e})),color:O[e]})),[t]);return(0,i.jsxs)(n.Zp,{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-foreground",children:String(t("trends.title",{defaultValue:"Trends"}))}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:x})]}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,i.jsx)(G,{children:["7d","30d","90d","12m"].map(e=>(0,i.jsx)(V,{active:o===e,onClick:()=>l(e),children:String(t(`range.${e}`,{defaultValue:e}))},e))}),(0,i.jsx)("div",{className:"mx-1 hidden h-6 w-px bg-border sm:block"}),(0,i.jsxs)(G,{children:[(0,i.jsx)(V,{active:"created"===d,onClick:()=>c("created"),children:String(t("trends.created",{defaultValue:"Created"}))}),(0,i.jsx)(V,{active:"updated"===d,onClick:()=>c("updated"),children:String(t("trends.updated",{defaultValue:"Updated"}))})]})]})]}),(0,i.jsx)("div",{className:"mt-6",children:0===f?(0,i.jsx)("div",{className:"flex min-h-[260px] items-center justify-center rounded-2xl border bg-muted/20 px-6 py-10 text-center",children:(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-foreground",children:String(t("trends.emptyTitle",{defaultValue:"No data yet"}))}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:String(t("trends.emptySubtitle",{defaultValue:"Add jobs and update statuses to see trends here."}))})]})}):(0,i.jsx)("div",{className:"rounded-2xl border bg-background p-3",children:(0,i.jsx)(N.bl,{className:"h-[260px]",data:m,index:"date",categories:$,colors:$.map(e=>L[e]),showLegend:!1,showYAxis:!0,showGridLines:!0,connectNulls:!0,curveType:"monotone",yAxisWidth:42,tickGap:24,valueFormatter:e=>String(U(e)),customTooltip:e=>(0,i.jsx)(P,{...e})})})}),f>0&&(0,i.jsx)("div",{className:"mt-4 flex flex-wrap gap-4",children:p.map(e=>(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,i.jsx)("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:e.color}}),(0,i.jsx)("span",{children:e.label})]},e.key))})]})}const Z=["applied","interview","offer","rejected"];function z(e,t){return t<=0?0:Math.round(e/t*100)}function H({matches:e}){const{t}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),s=(0,f.Zp)(),[o]=(0,a.useState)(()=>Date.now()),l=(0,a.useMemo)(()=>{const t={new:0,saved:0,applied:0,interview:0,offer:0,rejected:0};for(const s of e)t[s.status]+=1;return t},[e]),d=(0,a.useMemo)(()=>{const t=[];for(const s of e){if("interview"!==s.status)continue;const e=k(s.createdAt),r=k(s.updatedAt);e&&r&&t.push(A(e,r))}return M(t)},[e]),c=(0,a.useMemo)(()=>{const t=[];for(const s of e){if("offer"!==s.status)continue;const e=k(s.createdAt),r=k(s.updatedAt);e&&r&&t.push(A(e,r))}return M(t)},[e]),u=(0,a.useMemo)(()=>{const t={new:0,saved:0,applied:0,interview:0,offer:0,rejected:0};for(const s of e){if(!Z.includes(s.status))continue;const e=k(s.updatedAt)||k(s.createdAt);e&&(A(e,o)>=14&&(t[s.status]+=1))}return t},[e,o]),m=z(l.interview+l.offer+l.rejected,l.applied+l.interview+l.offer+l.rejected),p=z(l.offer,l.interview+l.offer);return(0,i.jsxs)(n.Zp,{className:"p-6",children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-foreground",children:t("insights.title","Insights")}),(0,i.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-3",children:[(0,i.jsx)(J,{label:t("insights.kpi.appliedToInterview","Applied â†’ Interview"),value:`${m}%`}),(0,i.jsx)(J,{label:t("insights.kpi.interviewToOffer","Interview â†’ Offer"),value:`${p}%`}),(0,i.jsx)(J,{label:t("insights.kpi.medianToInterview","Median to Interview"),value:null==d?"â€”":`${d}d`}),(0,i.jsx)(J,{label:t("insights.kpi.medianToOffer","Median to Offer"),value:null==c?"â€”":`${c}d`}),(0,i.jsx)(J,{label:t("insights.kpi.stale","Needs attention"),value:`${u.applied+u.interview+u.offer+u.rejected}`})]}),(0,i.jsxs)("div",{className:"mt-5 rounded-xl border border-border bg-muted/30 p-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-foreground",children:t("insights.actions.title","Next actions")}),(0,i.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,i.jsx)(Y,{label:t("insights.actions.staleApplied","Applied without updates (14+ days)"),count:u.applied,onGo:()=>s(`${x.RU[x.Sb.MATCHES]}?status=applied`),cta:t("insights.actions.view","View")}),(0,i.jsx)(Y,{label:t("insights.actions.staleInterview","Interview without updates (14+ days)"),count:u.interview,onGo:()=>s(`${x.RU[x.Sb.MATCHES]}?status=interview`),cta:t("insights.actions.view","View")}),(0,i.jsx)(Y,{label:t("insights.actions.staleOffer","Offers to follow up (14+ days)"),count:u.offer,onGo:()=>s(`${x.RU[x.Sb.MATCHES]}?status=offer`),cta:t("insights.actions.view","View")})]})]}),(0,i.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,i.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:()=>s(x.RU[x.Sb.MATCHES]),children:t("insights.actions.openAll","Open all")}),(0,i.jsx)(n.$n,{size:"sm",variant:"default",shape:"pill",onClick:()=>s(x.RU[x.Sb.SETTINGS_PROFILE]),children:t("pipeline.profileCta.button")})]})]})}function J({label:e,value:t}){return(0,i.jsxs)("div",{className:"rounded-xl border border-border bg-background px-4 py-3",children:[(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:e}),(0,i.jsx)("div",{className:"mt-1 text-lg font-semibold text-foreground",children:t})]})}function Y({label:e,count:t,cta:s,onGo:r}){return(0,i.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,i.jsx)("div",{className:"min-w-0",children:(0,i.jsx)("div",{className:"truncate text-sm text-foreground",children:e})}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"min-w-[24px] text-right text-sm text-muted-foreground",children:t}),(0,i.jsx)("button",{type:"button",onClick:r,className:"rounded-full border border-border bg-background px-3 py-1 text-xs text-foreground hover:bg-muted",children:s})]})]})}const _={new:"#111827",saved:"#6B7280",applied:"#3B82F6",interview:"#8B5CF6",offer:"#10B981",rejected:"#EF4444"};function K({matches:e,days:t=14,className:s}){const{t:o,i18n:l}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),d=(0,f.Zp)(),[c]=(0,a.useState)(()=>Date.now()),u=(0,a.useMemo)(()=>e.map(e=>{const t=k(e.updatedAt)||k(e.createdAt),s=C(e.status);return{id:e.id,title:e.title??null,company:e.company??null,status:s,when:t}}).filter(e=>null!=e.when&&A(e.when,c)<=t).sort((e,t)=>t.when-e.when).slice(0,24),[e,t,c]);return(0,i.jsxs)(n.Zp,{className:["flex h-full flex-col p-6",s].filter(Boolean).join(" "),children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-foreground",children:o("timeline.title","Timeline")}),(0,i.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:o("timeline.subtitle","Last {{days}} days",{days:t})})]}),(0,i.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:()=>d(x.RU[x.Sb.MATCHES]),children:o("timeline.viewAll","View all")})]}),0===u.length?(0,i.jsx)("div",{className:"mt-4 text-sm text-muted-foreground",children:o("timeline.empty","No recent updates")}):(0,i.jsx)("div",{className:"mt-4 flex-1 space-y-3 overflow-y-auto pr-1",children:u.map(e=>(0,i.jsxs)("button",{type:"button",className:"w-full rounded-lg border border-border bg-background p-3 text-left transition hover:bg-muted/40",onClick:()=>d(`${x.RU[x.Sb.MATCHES]}/${e.id}`),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("div",{className:"truncate text-sm font-medium text-foreground",children:e.title||o("recent.untitled","Untitled")}),(0,i.jsx)("div",{className:"mt-0.5 truncate text-xs text-muted-foreground",children:e.company||o("recent.noCompany","No company")})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:_[e.status]}}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:o(`status.${e.status}`,e.status)})]})]}),(0,i.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:new Date(e.when).toLocaleDateString(l.language,{year:"numeric",month:"short",day:"2-digit"})})]},e.id))})]})}const W=["applied","interview","offer","rejected"],q={new:"#111827",saved:"#6B7280",applied:"#3B82F6",interview:"#8B5CF6",offer:"#10B981",rejected:"#EF4444"};function Q({matches:e}){const{t}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),s=(0,a.useMemo)(()=>{const t={new:0,saved:0,applied:0,interview:0,offer:0,rejected:0};for(const s of e)W.includes(s.status)&&(t[s.status]+=1);return t},[e]),o=s.applied+s.interview+s.offer+s.rejected,l=(0,a.useMemo)(()=>W.map(e=>({key:e,label:t(`status.${e}`,e)})),[t]),d=(0,a.useMemo)(()=>{const e={new:0,saved:0,applied:o?s.applied/o:0,interview:o?s.interview/o:0,offer:o?s.offer/o:0,rejected:o?s.rejected/o:0};return[{key:"mix",label:t("radar.mix","Mix"),color:"#2563EB",values:e},{key:"rejected",label:t("status.rejected","Rejected"),color:q.rejected,values:{...e,rejected:o?s.rejected/o:0,applied:0,interview:0,offer:0,new:0,saved:0}}]},[s.applied,s.interview,s.offer,s.rejected,t,o]);return(0,i.jsxs)(n.Zp,{className:"p-6",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-foreground",children:t("radar.title","Pipeline mix")}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:t("radar.subtitle","Share by status")})]}),(0,i.jsx)("div",{className:"mt-5 flex items-center justify-center",children:(0,i.jsx)(n.VW,{axes:l,series:d,size:260})}),(0,i.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:W.map(e=>{return(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:q[e]}}),(0,i.jsx)("span",{className:"text-muted-foreground",children:t(`status.${e}`,e)})]}),(0,i.jsxs)("span",{className:"text-foreground",children:[o?Math.round((s[(r=e,W.includes(r)?r:"applied")]??0)/o*100):0,"%"]})]},e);var r})})]})}}}]);
//# sourceMappingURL=6045.15cf3575.chunk.js.map