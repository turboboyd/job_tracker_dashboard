{"version":3,"file":"assets/js/4012.f935b173.chunk.js","mappings":"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","sources":["webpack://job-tracker-dashboard/./src/shared/lib/url/updateURLParams.ts","webpack://job-tracker-dashboard/./src/entities/loopMatch/api/loopMatchesApi.ts","webpack://job-tracker-dashboard/./src/pages/LoopsPage/components/Header.tsx","webpack://job-tracker-dashboard/./src/entities/loop/lib/filters/buildCanonicalFiltersFromLoop.ts","webpack://job-tracker-dashboard/./src/entities/loop/lib/format/loopFormat.ts","webpack://job-tracker-dashboard/./src/entities/loop/lib/detectPlatformFromUrl.ts","webpack://job-tracker-dashboard/./src/entities/loop/ui/AddMatchModal/AddMatchModal.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/EditSourcesModal/EditSourcesModal.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/CompactFilters/CompactFilters.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/LoopSettingsModal/LoopSettingsModal.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/LoopSearchLinks/components/PlatformLinkCard.tsx","webpack://job-tracker-dashboard/./src/entities/loop/ui/LoopSearchLinks/useLoopSearchLinksState.ts","webpack://job-tracker-dashboard/./src/entities/loop/ui/LoopSearchLinks/LoopSearchLinks.tsx","webpack://job-tracker-dashboard/./src/entities/loop/lib/links/searchLinks.ts","webpack://job-tracker-dashboard/./src/entities/loop/lib/filters/mapCanonicalToSearchFilters.ts","webpack://job-tracker-dashboard/./src/entities/loop/lib/filters/mapWorkModeToRemoteMode.ts","webpack://job-tracker-dashboard/./src/pages/LoopsPage/components/LoopDetailsView.tsx","webpack://job-tracker-dashboard/./src/pages/LoopsPage/components/LoopsListView.tsx","webpack://job-tracker-dashboard/./src/pages/LoopsPage/LoopsPage.tsx"],"sourcesContent":["import type { Location, NavigateFunction } from \"react-router-dom\";\n\ntype Updates = Record<string, string | number | boolean | null | undefined>;\n\ntype Options = {\n  replace?: boolean;\n};\n\n/**\n * Small helper for manipulating query params without manually building strings.\n *\n * Rules:\n * - null/undefined/false => remove param\n * - true => set \"1\"\n * - number/string => set as string\n */\nexport function updateURLParams(\n  navigate: NavigateFunction,\n  location: Location,\n  updates: Updates,\n  options: Options = { replace: true }\n) {\n  const sp = new URLSearchParams(location.search);\n\n  for (const [key, value] of Object.entries(updates)) {\n    if (value === null || value === undefined || value === false) {\n      sp.delete(key);\n      continue;\n    }\n\n    if (value === true) {\n      sp.set(key, \"1\");\n      continue;\n    }\n\n    sp.set(key, String(value));\n  }\n\n  const nextSearch = sp.toString();\n  navigate(\n    {\n      pathname: location.pathname,\n      search: nextSearch ? `?${nextSearch}` : \"\",\n    },\n    { replace: options.replace ?? true }\n  );\n}\n","import {\n  addDoc,\n  deleteDoc,\n  getDoc,\n  getDocs,\n  orderBy,\n  query,\n  serverTimestamp,\n  updateDoc,\n  where,\n  type FieldValue,\n  type UpdateData,\n} from \"firebase/firestore\";\n\nimport { userLoopMatchDoc, userLoopMatchesCol } from \"src/shared/api/firestoreRefs\";\nimport { baseApi } from \"src/shared/api/rtk/baseApi\";\nimport { requireUidFromState } from \"src/shared/api/rtk/requireUid\";\n\nimport type {\n  CreateLoopMatchInput,\n  DeleteLoopMatchInput,\n  LoopMatch,\n  UpdateLoopMatchInput,\n  UpdateLoopMatchStatusInput,\n} from \"../model/types\";\n\n\ntype ApiError = { message: string };\n\nfunction toMsg(e: unknown): string {\n  return e instanceof Error ? e.message : String(e);\n}\n\nfunction rtkError(message: string) {\n  return { error: { message } as ApiError } as const;\n}\n\nfunction makeTimestamps(): { iso: string; server: FieldValue } {\n  const iso = new Date().toISOString();\n  return { iso, server: serverTimestamp() };\n}\n\nexport type GetMatchesByLoopArgs = { loopId: string };\nexport type GetMatchArgs = { matchId: string };\n\nfunction normalizeUrl(input: string): string {\n  const v = String(input ?? \"\").trim();\n  if (!v) return \"\";\n  if (!/^https?:\\/\\//i.test(v)) return `https://${v}`;\n  return v;\n}\n\nfunction cleanPatch(patch: UpdateLoopMatchInput[\"patch\"]): UpdateLoopMatchInput[\"patch\"] {\n  const out: UpdateLoopMatchInput[\"patch\"] = { ...patch };\n  if (typeof out.url === \"string\") out.url = normalizeUrl(out.url);\n  return out;\n}\n\nexport const loopMatchesApi = baseApi.injectEndpoints({\n  endpoints: (builder) => ({\n    // --------------------\n    // LIST: all matches\n    // --------------------\n    getAllMatches: builder.query<LoopMatch[], void>({\n      async queryFn(_arg, api) {\n        try {\n          const uid = requireUidFromState(api.getState());\n          const q = query(\n            userLoopMatchesCol(uid),\n            orderBy(\"matchedAt\", \"desc\")\n          );\n\n          const snap = await getDocs(q);\n          const matches: LoopMatch[] = snap.docs.map((d) => ({\n            id: d.id,\n            ...(d.data() as Omit<LoopMatch, \"id\">),\n          }));\n\n          return { data: matches };\n        } catch (e) {\n          return rtkError(toMsg(e));\n        }\n      },\n      providesTags: (res) =>\n        res\n          ? [\n              ...res.map((m) => ({ type: \"LoopMatches\" as const, id: m.id })),\n              { type: \"LoopMatches\" as const, id: \"LIST:ALL\" },\n            ]\n          : [{ type: \"LoopMatches\" as const, id: \"LIST:ALL\" }],\n    }),\n\n    // --------------------\n    // LIST: matches by loopId\n    // --------------------\n    getMatchesByLoop: builder.query<LoopMatch[], GetMatchesByLoopArgs>({\n      async queryFn({ loopId }, api) {\n        try {\n          const uid = requireUidFromState(api.getState());\n          const q = query(\n            userLoopMatchesCol(uid),\n            // loopId remains a field to filter matches that belong to a loop\n            // (even though ownership is already enforced by path)\n            where(\"loopId\", \"==\", loopId),\n            orderBy(\"matchedAt\", \"desc\")\n          );\n\n          const snap = await getDocs(q);\n          const matches: LoopMatch[] = snap.docs.map((d) => ({\n            id: d.id,\n            ...(d.data() as Omit<LoopMatch, \"id\">),\n          }));\n\n          return { data: matches };\n        } catch (e) {\n          return rtkError(toMsg(e));\n        }\n      },\n      providesTags: (_res, _err, arg) => [\n        { type: \"LoopMatches\" as const, id: `LIST:LOOP:${arg.loopId}` },\n      ],\n    }),\n\n    // --------------------\n    // GET: one match by id\n    // --------------------\n    getMatch: builder.query<LoopMatch | null, GetMatchArgs>({\n      async queryFn({ matchId }, api) {\n        try {\n          const uid = requireUidFromState(api.getState());\n          const snap = await getDoc(userLoopMatchDoc(uid, matchId));\n          if (!snap.exists()) return { data: null };\n\n          const m: LoopMatch = {\n            id: snap.id,\n            ...(snap.data() as Omit<LoopMatch, \"id\">),\n          };\n          return { data: m };\n        } catch (e) {\n          return rtkError(toMsg(e));\n        }\n      },\n      providesTags: (_res, _err, arg) => [\n        { type: \"LoopMatches\" as const, id: arg.matchId },\n      ],\n    }),\n\n    // --------------------\n    // CREATE\n    // --------------------\n    createMatch: builder.mutation<{ id: string }, CreateLoopMatchInput>({\n      async queryFn(input, api) {\n        try {\n          const uid = requireUidFromState(api.getState());\n          const { iso, server } = makeTimestamps();\n\n          const payload = {\n            ...input,\n            url: normalizeUrl(input.url),\n            createdAt: iso,\n            updatedAt: iso,\n            createdAtTs: server,\n            updatedAtTs: server,\n          } as Record<string, unknown>;\n\n          const ref = await addDoc(userLoopMatchesCol(uid), payload);\n          return { data: { id: ref.id } };\n        } catch (e) {\n          return rtkError(toMsg(e));\n        }\n      },\n      invalidatesTags: (_r, _e, arg) => [\n        { type: \"LoopMatches\" as const, id: \"LIST:ALL\" },\n        { type: \"LoopMatches\" as const, id: `LIST:LOOP:${arg.loopId}` },\n      ],\n    }),\n\n    // --------------------\n    // UPDATE: status only\n    // --------------------\n    updateMatchStatus: builder.mutation<void, UpdateLoopMatchStatusInput>({\n      async queryFn({ matchId, status }, api) {\n        try {\n          const { iso, server } = makeTimestamps();\n          const uid = requireUidFromState(api.getState());\n\n          await updateDoc(userLoopMatchDoc(uid, matchId), {\n            status,\n            updatedAt: iso,\n            updatedAtTs: server,\n          } as UpdateData<Omit<LoopMatch, \"id\">>);\n\n          return { data: undefined };\n        } catch (e) {\n          return rtkError(toMsg(e));\n        }\n      },\n      invalidatesTags: (_r, _e, arg) => [\n        { type: \"LoopMatches\" as const, id: arg.matchId },\n        { type: \"LoopMatches\" as const, id: \"LIST:ALL\" },\n        { type: \"LoopMatches\" as const, id: `LIST:LOOP:${arg.loopId}` },\n      ],\n    }),\n\n    // --------------------\n    // UPDATE: fields\n    // --------------------\n    updateMatch: builder.mutation<void, UpdateLoopMatchInput>({\n      async queryFn({ matchId, patch }, api) {\n        try {\n          const { iso, server } = makeTimestamps();\n          const cleaned = cleanPatch(patch);\n\n          const uid = requireUidFromState(api.getState());\n\n          await updateDoc(userLoopMatchDoc(uid, matchId), {\n            ...cleaned,\n            updatedAt: iso,\n            updatedAtTs: server,\n          } as UpdateData<Omit<LoopMatch, \"id\">>);\n\n          return { data: undefined };\n        } catch (e) {\n          return rtkError(toMsg(e));\n        }\n      },\n      invalidatesTags: (_r, _e, arg) => [\n        { type: \"LoopMatches\" as const, id: arg.matchId },\n        { type: \"LoopMatches\" as const, id: \"LIST:ALL\" },\n        // We don't know the loopId from patch alone; we invalidate all matches list.\n      ],\n    }),\n\n    // --------------------\n    // DELETE\n    // --------------------\n    deleteMatch: builder.mutation<void, DeleteLoopMatchInput>({\n      async queryFn({ matchId }, api) {\n        try {\n          const uid = requireUidFromState(api.getState());\n          await deleteDoc(userLoopMatchDoc(uid, matchId));\n          return { data: undefined };\n        } catch (e) {\n          return rtkError(toMsg(e));\n        }\n      },\n      invalidatesTags: (_r, _e, arg) => [\n        { type: \"LoopMatches\" as const, id: arg.matchId },\n        { type: \"LoopMatches\" as const, id: \"LIST:ALL\" },\n        { type: \"LoopMatches\" as const, id: `LIST:LOOP:${arg.loopId}` },\n      ],\n    }),\n  }),\n});\n\nexport const {\n  useGetAllMatchesQuery,\n  useGetMatchesByLoopQuery,\n  useGetMatchQuery,\n  useCreateMatchMutation,\n  useUpdateMatchStatusMutation,\n  useUpdateMatchMutation,\n  useDeleteMatchMutation,\n} = loopMatchesApi;\n","import React from \"react\";\n\nexport function Header({\n  title,\n  subtitle,\n  right,\n}: {\n  title: string;\n  subtitle?: string;\n  right?: React.ReactNode;\n}) {\n  return (\n    <div className=\"flex items-start justify-between gap-3\">\n      <div>\n        <div className=\"text-2xl font-semibold text-foreground\">{title}</div>\n        {subtitle ? (\n          <div className=\"mt-1 text-sm text-muted-foreground\">{subtitle}</div>\n        ) : null}\n      </div>\n      {right}\n    </div>\n  );\n}\nexport function SectionHeader({\n  title,\n  subtitle,\n  right,\n}: {\n  title: string;\n  subtitle?: string;\n  right?: React.ReactNode;\n}) {\n  return (\n    <div className=\"flex items-center justify-between gap-3\">\n      <div>\n        <div className=\"text-base font-semibold text-foreground\">{title}</div>\n        {subtitle ? (\n          <div className=\"mt-1 text-sm text-muted-foreground\">{subtitle}</div>\n        ) : null}\n      </div>\n      {right}\n    </div>\n  );\n}\n\nexport function CardText({ children }: { children: React.ReactNode }) {\n  return (\n    <div className=\"rounded-2xl border border-border bg-card p-6 text-sm text-muted-foreground\">\n      {children}\n    </div>\n  );\n}\n","import type { CanonicalFilters } from \"src/entities/loop/model\";\nimport { DEFAULT_CANONICAL_FILTERS } from \"src/entities/loop/model\";\n\ntype UnknownRecord = Record<string, unknown>;\n\nfunction isRecord(v: unknown): v is UnknownRecord {\n  return typeof v === \"object\" && v !== null;\n}\n\nfunction asString(v: unknown, fallback: string): string {\n  return typeof v === \"string\" ? v : fallback;\n}\n\nfunction asBoolean(v: unknown, fallback: boolean): boolean {\n  return typeof v === \"boolean\" ? v : fallback;\n}\n\nfunction asNumber(v: unknown, fallback: number): number {\n  const n = typeof v === \"number\" ? v : Number(v);\n  return Number.isFinite(n) ? n : fallback;\n}\n\nfunction pickFrom<T extends readonly (string | number)[]>(\n  v: unknown,\n  allowed: T,\n  fallback: T[number]\n): T[number] {\n   \n  return (allowed as readonly unknown[]).includes(v) ? (v as T[number]) : fallback;\n}\n\n/**\n *  CanonicalFilters   .\n *\n * :\n * - Firestore/URL/localStorage ->  unknown\n * - UI  RTK store ->  CanonicalFilters\n */\nexport function buildCanonicalFiltersFromLoop(loop: unknown): CanonicalFilters {\n  const src: UnknownRecord = (() => {\n    if (!isRecord(loop)) return {};\n\n    //   :\n    // 1) loop.filters = { ... }\n    // 2)   \n    const maybeFilters = loop.filters;\n    if (isRecord(maybeFilters)) return maybeFilters;\n    return loop;\n  })();\n\n  //     CanonicalFilters.\n  //    -> fallback  DEFAULT_CANONICAL_FILTERS.\n  return {\n    role: asString(src.role, DEFAULT_CANONICAL_FILTERS.role),\n    location: asString(src.location, DEFAULT_CANONICAL_FILTERS.location),\n    radiusKm: pickFrom(\n      asNumber(src.radiusKm, DEFAULT_CANONICAL_FILTERS.radiusKm),\n      [5, 10, 20, 30, 50, 100] as const,\n      DEFAULT_CANONICAL_FILTERS.radiusKm\n    ),\n\n    workMode: pickFrom(\n      src.workMode,\n      [\"any\", \"onsite\", \"hybrid\", \"remote\", \"remote_only\"] as const,\n      DEFAULT_CANONICAL_FILTERS.workMode\n    ),\n\n    seniority: pickFrom(\n      src.seniority,\n      [\"intern\", \"junior\", \"mid\", \"senior\", \"lead\"] as const,\n      DEFAULT_CANONICAL_FILTERS.seniority\n    ),\n\n    employmentType: pickFrom(\n      src.employmentType,\n      [\"full_time\", \"part_time\", \"contract\", \"internship\", \"ausbildung\"] as const,\n      DEFAULT_CANONICAL_FILTERS.employmentType\n    ),\n\n    postedWithin: pickFrom(\n      asNumber(src.postedWithin, DEFAULT_CANONICAL_FILTERS.postedWithin),\n      [1, 3, 7, 14, 30] as const,\n      DEFAULT_CANONICAL_FILTERS.postedWithin\n    ),\n\n    includeKeywords: asString(\n      src.includeKeywords,\n      DEFAULT_CANONICAL_FILTERS.includeKeywords\n    ),\n    excludeKeywords: asString(\n      src.excludeKeywords,\n      DEFAULT_CANONICAL_FILTERS.excludeKeywords\n    ),\n\n    excludeAgencies: asBoolean(\n      src.excludeAgencies,\n      DEFAULT_CANONICAL_FILTERS.excludeAgencies\n    ),\n    language: pickFrom(\n      src.language,\n      [\"any\", \"de\", \"en\"] as const,\n      DEFAULT_CANONICAL_FILTERS.language\n    ),\n  };\n}\n","import { LOOP_MATCH_STATUSES } from \"src/entities/loop/model\";\nimport type { LoopMatchStatus } from \"src/entities/loopMatch/model/types\";\n\nexport function labelStatus(s: LoopMatchStatus) {\n  return LOOP_MATCH_STATUSES.find((x) => x.value === s)?.label ?? s;\n}\n\nexport function prettyStatus(s: string) {\n  return s.split(\"_\").join(\" \").toUpperCase();\n}\n\nexport function joinTitles(titles: string[]) {\n  return titles\n    .map((t) => String(t ?? \"\").trim())\n    .filter(Boolean)\n    .join(\" OR \");\n}\n\n\n","import type { LoopPlatform } from \"../model\";\n\n/**\n * Lightweight URL classifier.\n *\n * SonarJS previously flagged the old implementation for high cognitive complexity\n * due to a long chain of if/else statements. The table-driven approach below is\n * easier to maintain and keeps complexity low.\n */\nconst HOST_RULES: Array<{ needle: string; platform: LoopPlatform }> = [\n  { needle: \"linkedin.com\", platform: \"linkedin\" },\n  { needle: \"indeed.\", platform: \"indeed\" },\n  { needle: \"glassdoor.\", platform: \"glassdoor\" },\n  { needle: \"monster.\", platform: \"monster\" },\n  { needle: \"stepstone.\", platform: \"stepstone\" },\n  { needle: \"xing.\", platform: \"xing\" },\n  { needle: \"github.com\", platform: \"github\" },\n  { needle: \"wellfound.\", platform: \"wellfound\" },\n  { needle: \"angel.co\", platform: \"wellfound\" },\n  { needle: \"levels.fyi\", platform: \"levels\" },\n];\n\nexport function detectPlatformFromUrl(url: string | null | undefined): LoopPlatform {\n  if (!url) return \"other\";\n\n  let host = \"\";\n  try {\n    host = new URL(url).host.toLowerCase();\n  } catch {\n    // Not a valid URL (e.g. user pasted a partial string)\n    return \"other\";\n  }\n\n  for (const rule of HOST_RULES) {\n    if (host.includes(rule.needle)) return rule.platform;\n  }\n\n  return \"other\";\n}\n","import { Formik } from \"formik\";\nimport type { TFunction } from \"i18next\";\nimport { useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Yup from \"yup\";\n\nimport { useCreateMatchMutation } from \"src/entities/loopMatch/api\";\nimport type { LoopMatchStatus } from \"src/entities/loopMatch/model/types\";\nimport { getErrorMessage } from \"src/shared/lib\";\nimport { Button, InlineError, Input, Modal, TextArea } from \"src/shared/ui\";\nimport { FormField } from \"src/shared/ui/Form/FormField/FormField\";\n\nimport { detectPlatformFromUrl } from \"../../lib/detectPlatformFromUrl\";\nimport type { LoopPlatform } from \"../../model\";\nimport { LOOP_MATCH_STATUSES, LOOP_PLATFORMS } from \"../../model/constants\";\n\ntype Props = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  loopId: string;\n\n  defaultPlatform?: LoopPlatform;\n};\n\ntype Values = {\n  title: string;\n  company: string;\n  location: string;\n  platform: LoopPlatform;\n  url: string;\n  description: string;\n  status: LoopMatchStatus;\n  matchedAt: string;\n};\n\nfunction isoNow() {\n  return new Date().toISOString();\n}\n\nfunction platformOrDefault(p?: LoopPlatform): LoopPlatform {\n  return p ?? \"linkedin\";\n}\n\nfunction tryParseUrl(input: string): URL | null {\n  const v = input.trim();\n  if (!v) return null;\n\n  try {\n    return new URL(v);\n  } catch {\n    try {\n      return new URL(`https://${v}`);\n    } catch {\n      return null;\n    }\n  }\n}\n\nconst platformValues = LOOP_PLATFORMS.map((p) => p.value) as LoopPlatform[];\nconst statusValues = LOOP_MATCH_STATUSES.map((s) => s.value) as LoopMatchStatus[];\n\nfunction makeSchema(t: TFunction) {\n  return Yup.object({\n    title: Yup.string()\n      .trim()\n      .min(\n        2,\n        t(\"loops.validation.titleRequired\", { defaultValue: \"Title is required\" })\n      )\n      .required(\n        t(\"loops.validation.titleRequired\", { defaultValue: \"Title is required\" })\n      ),\n\n    company: Yup.string()\n      .trim()\n      .min(\n        2,\n        t(\"loops.validation.companyRequired\", { defaultValue: \"Company is required\" })\n      )\n      .required(\n        t(\"loops.validation.companyRequired\", { defaultValue: \"Company is required\" })\n      ),\n\n    location: Yup.string()\n      .trim()\n      .min(\n        2,\n        t(\"loops.validation.locationRequired\", { defaultValue: \"Location is required\" })\n      )\n      .required(\n        t(\"loops.validation.locationRequired\", { defaultValue: \"Location is required\" })\n      ),\n\n    platform: Yup.mixed<LoopPlatform>()\n      .oneOf(platformValues)\n      .required(\n        t(\"loops.validation.platformRequired\", { defaultValue: \"Platform is required\" })\n      ),\n\n    url: Yup.string()\n      .trim()\n      .required(\n        t(\"loops.validation.urlRequired\", { defaultValue: \"Job URL is required\" })\n      )\n      .test(\n        \"is-url\",\n        t(\"loops.validation.invalidUrl\", { defaultValue: \"Invalid URL\" }),\n        (v) => Boolean(tryParseUrl(v ?? \"\"))\n      ),\n\n    description: Yup.string()\n      .trim()\n      .min(\n        1,\n        t(\"loops.validation.descriptionRequired\", { defaultValue: \"Description is required\" })\n      )\n      .required(\n        t(\"loops.validation.descriptionRequired\", { defaultValue: \"Description is required\" })\n      ),\n\n    status: Yup.mixed<LoopMatchStatus>()\n      .oneOf(statusValues)\n      .required(\n        t(\"loops.validation.statusRequired\", { defaultValue: \"Status is required\" })\n      ),\n\n    matchedAt: Yup.string().trim().required(),\n  }) as Yup.ObjectSchema<Values>;\n}\n\nexport function AddMatchModal({\n  open,\n  onOpenChange,\n  loopId,\n  defaultPlatform,\n}: Props) {\n  const { t } = useTranslation();\n  const [createMatch, st] = useCreateMatchMutation();\n\n  const schema = useMemo(() => makeSchema(t), [t]);\n\n  const initial: Values = useMemo(\n    () => ({\n      title: \"\",\n      company: \"\",\n      location: \"\",\n      platform: platformOrDefault(defaultPlatform),\n      url: \"\",\n      description: \"\",\n      status: \"new\",\n      matchedAt: isoNow(),\n    }),\n    [defaultPlatform]\n  );\n\n  const disabled = st.isLoading;\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      title={t(\"loops.addMatch\", { defaultValue: \"Add match\" })}\n      description={t(\"loops.addMatchDescription\", {\n        defaultValue: \"Paste the job URL and fill details. This saves a match to your loop.\",\n      })}\n    >\n      <Formik<Values>\n        initialValues={initial}\n        enableReinitialize\n        validationSchema={schema}\n        onSubmit={async (values, helpers) => {\n          helpers.setStatus(undefined);\n\n          try {\n            await createMatch({\n              loopId,\n              title: values.title,\n              company: values.company,\n              location: values.location,\n              platform: values.platform,\n              url: values.url,\n              description: values.description,\n              status: values.status,\n              matchedAt: values.matchedAt,\n            }).unwrap();\n\n            onOpenChange(false);\n          } catch (e) {\n            helpers.setStatus(\n              getErrorMessage(e) ||\n                t(\"loops.failedToSaveMatch\", { defaultValue: \"Failed to save match\" })\n            );\n          }\n        }}\n      >\n        {(f) => {\n          const commonError =\n            (typeof f.status === \"string\" ? f.status : undefined) ||\n            (st.isError ? getErrorMessage(st.error) : undefined);\n\n          const canSubmit = !disabled && f.dirty;\n\n          return (\n            <form onSubmit={f.handleSubmit} className=\"space-y-4\">\n              {commonError ? <InlineError message={commonError} /> : null}\n\n              <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n                <FormField\n                  label={t(\"loops.jobTitle\", { defaultValue: \"Job title\" })}\n                  required\n                  error={\n                    f.touched.title ? (f.errors.title as string | undefined) : undefined\n                  }\n                >\n                  {({ id, describedBy, invalid }) => (\n                    <Input\n                      id={id}\n                      name=\"title\"\n                      value={f.values.title}\n                      onChange={f.handleChange}\n                      onBlur={f.handleBlur}\n                      placeholder={t(\"loops.jobTitlePlaceholder\", {\n                        defaultValue: \"Frontend Developer\",\n                      })}\n                      state={invalid ? \"error\" : \"default\"}\n                      aria-invalid={invalid}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                    />\n                  )}\n                </FormField>\n\n                <FormField\n                  label={t(\"loops.company\", { defaultValue: \"Company\" })}\n                  required\n                  error={\n                    f.touched.company\n                      ? (f.errors.company as string | undefined)\n                      : undefined\n                  }\n                >\n                  {({ id, describedBy, invalid }) => (\n                    <Input\n                      id={id}\n                      name=\"company\"\n                      value={f.values.company}\n                      onChange={f.handleChange}\n                      onBlur={f.handleBlur}\n                      placeholder={t(\"loops.companyPlaceholder\", { defaultValue: \"Acme GmbH\" })}\n                      state={invalid ? \"error\" : \"default\"}\n                      aria-invalid={invalid}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                    />\n                  )}\n                </FormField>\n\n                <FormField\n                  label={t(\"loops.location\", { defaultValue: \"Location\" })}\n                  required\n                  error={\n                    f.touched.location\n                      ? (f.errors.location as string | undefined)\n                      : undefined\n                  }\n                >\n                  {({ id, describedBy, invalid }) => (\n                    <Input\n                      id={id}\n                      name=\"location\"\n                      value={f.values.location}\n                      onChange={f.handleChange}\n                      onBlur={f.handleBlur}\n                      placeholder={t(\"loops.locationJobPlaceholder\", { defaultValue: \"Berlin / Remote\" })}\n                      state={invalid ? \"error\" : \"default\"}\n                      aria-invalid={invalid}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                    />\n                  )}\n                </FormField>\n\n                <FormField label={t(\"loops.platform\", { defaultValue: \"Platform\" })} required>\n                  {({ id, describedBy }) => (\n                    <select\n                      id={id}\n                      name=\"platform\"\n                      value={f.values.platform}\n                      onChange={f.handleChange}\n                      onBlur={f.handleBlur}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                      className=\"h-10 w-full rounded-xl border border-border bg-input px-3 text-sm text-foreground\"\n                    >\n                      {LOOP_PLATFORMS.map((p) => (\n                        <option key={p.value} value={p.value}>\n                          {p.label}\n                        </option>\n                      ))}\n                    </select>\n                  )}\n                </FormField>\n\n                <FormField\n                  label={t(\"loops.jobUrl\", { defaultValue: \"Job URL\" })}\n                  required\n                  hint={t(\"loops.jobUrlHint\", {\n                    defaultValue: \"You can paste without https:// (it will be normalized on save).\",\n                  })}\n                  error={f.touched.url ? (f.errors.url as string | undefined) : undefined}\n                >\n                  {({ id, describedBy, invalid }) => (\n                    <Input\n                      id={id}\n                      name=\"url\"\n                      value={f.values.url}\n                      onChange={(e) => {\n                        const next = e.target.value;\n                        f.setFieldValue(\"url\", next);\n\n                        const detected = detectPlatformFromUrl(next);\n                        if (detected) f.setFieldValue(\"platform\", detected);\n                      }}\n                      onBlur={f.handleBlur}\n                      placeholder={t(\"loops.jobUrlPlaceholder\", { defaultValue: \"company.com/job\" })}\n                      state={invalid ? \"error\" : \"default\"}\n                      aria-invalid={invalid}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                    />\n                  )}\n                </FormField>\n\n                <FormField label={t(\"loops.status\", { defaultValue: \"Status\" })} required>\n                  {({ id, describedBy }) => (\n                    <select\n                      id={id}\n                      name=\"status\"\n                      value={f.values.status}\n                      onChange={f.handleChange}\n                      onBlur={f.handleBlur}\n                      aria-describedby={describedBy}\n                      disabled={disabled}\n                      className=\"h-10 w-full rounded-xl border border-border bg-input px-3 text-sm text-foreground\"\n                    >\n                      {LOOP_MATCH_STATUSES.map((s) => (\n                        <option key={s.value} value={s.value}>\n                          {t(`loops.status.${s.value}`, { defaultValue: s.label })}\n                        </option>\n                      ))}\n                    </select>\n                  )}\n                </FormField>\n              </div>\n\n              <FormField\n                label={t(\"loops.description\", { defaultValue: \"Description\" })}\n                required\n                error={\n                  f.touched.description\n                    ? (f.errors.description as string | undefined)\n                    : undefined\n                }\n              >\n                {({ id, describedBy, invalid }) => (\n                  <TextArea\n                    id={id}\n                    name=\"description\"\n                    value={f.values.description}\n                    onChange={f.handleChange}\n                    onBlur={f.handleBlur}\n                    placeholder={t(\"loops.descriptionPlaceholder\", {\n                      defaultValue: \"Paste key parts of the job description here\",\n                    })}\n                    state={invalid ? \"error\" : \"default\"}\n                    aria-invalid={invalid}\n                    aria-describedby={describedBy}\n                    disabled={disabled}\n                  />\n                )}\n              </FormField>\n\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  type=\"submit\"\n                  variant=\"default\"\n                  shadow=\"sm\"\n                  shape=\"lg\"\n                  disabled={!canSubmit}\n                >\n                  {disabled\n                    ? t(\"loops.saving\", { defaultValue: \"Saving...\" })\n                    : t(\"loops.saveMatch\", { defaultValue: \"Save match\" })}\n                </Button>\n\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  shape=\"lg\"\n                  onClick={() => onOpenChange(false)}\n                  disabled={disabled}\n                >\n                  {t(\"loops.cancel\", { defaultValue: \"Cancel\" })}\n                </Button>\n              </div>\n            </form>\n          );\n        }}\n      </Formik>\n    </Modal>\n  );\n}\n","import { useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { Button, Modal } from \"src/shared/ui\";\n\nimport {\n  ALL_PLATFORMS,\n  GROUPS,\n  PLATFORM_LABEL_BY_ID,\n  RECOMMENDED_PLATFORMS,\n  platformsByGroup,\n  type LoopPlatform,\n} from \"../../model\";\n\ntype Props = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n\n  value: LoopPlatform[];\n  disabled?: boolean;\n\n  onSave: (next: LoopPlatform[]) => Promise<void> | void;\n};\n\nfunction uniquePlatforms(list: LoopPlatform[]) {\n  const set = new Set<LoopPlatform>();\n  for (const p of list) set.add(p);\n  return Array.from(set);\n}\n\nfunction sortByLabel(list: LoopPlatform[]) {\n  return [...list].sort((a, b) => {\n    const la = PLATFORM_LABEL_BY_ID[a] ?? a;\n    const lb = PLATFORM_LABEL_BY_ID[b] ?? b;\n    return la.localeCompare(lb);\n  });\n}\n\nexport function EditSourcesModal({\n  open,\n  onOpenChange,\n  value,\n  disabled,\n  onSave,\n}: Props) {\n  const { t } = useTranslation();\n  const [selected, setSelected] = useState<LoopPlatform[]>(() =>\n    uniquePlatforms(value ?? [])\n  );\n  const [isSaving, setIsSaving] = useState(false);\n\n  useEffect(() => {\n    if (open) setSelected(uniquePlatforms(value ?? []));\n  }, [open, value]);\n\n  const selectedSet = useMemo(() => new Set(selected), [selected]);\n\n  const totalSelected = selected.length;\n\n  const toggle = (p: LoopPlatform) => {\n    setSelected((prev) => {\n      const next = new Set(prev);\n      if (next.has(p)) next.delete(p);\n      else next.add(p);\n      return Array.from(next);\n    });\n  };\n\n  const setPresetRecommended = () => setSelected(RECOMMENDED_PLATFORMS);\n  const setPresetAll = () => setSelected(ALL_PLATFORMS);\n\n  const toggleGroup = (groupId: (typeof GROUPS)[number][\"id\"]) => {\n    const groupPlatforms = platformsByGroup(groupId);\n    setSelected((prev) => {\n      const next = new Set(prev);\n      const allInGroupSelected = groupPlatforms.every((p) => next.has(p));\n      if (allInGroupSelected) {\n        for (const p of groupPlatforms) next.delete(p);\n      } else {\n        for (const p of groupPlatforms) next.add(p);\n      }\n      return Array.from(next);\n    });\n  };\n\n  const canSave = !disabled && !isSaving;\n\n  async function handleSave() {\n    setIsSaving(true);\n    try {\n      await onSave(uniquePlatforms(selected));\n      onOpenChange(false);\n    } finally {\n      setIsSaving(false);\n    }\n  }\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      title={t(\"loops.editSources\", \"Edit sources\")}\n      description={t(\n        \"loops.editSourcesDescription\",\n        \"Choose job boards/platforms. This controls which search links are generated.\"\n      )}\n      size=\"lg\"\n    >\n      <div className=\"space-y-4\">\n        <div className=\"flex flex-wrap items-center justify-between gap-2\">\n          <div className=\"text-sm text-muted-foreground\">\n            {t(\"loops.selected\", \"Selected\")}: {\" \"}\n            <span className=\"font-medium text-foreground\">{totalSelected}</span>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              onClick={setPresetRecommended}\n              disabled={disabled || isSaving}\n            >\n              {t(\"loops.recommended\", \"Recommended\")}\n            </Button>\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              onClick={setPresetAll}\n              disabled={disabled || isSaving}\n            >\n              {t(\"loops.selectAll\", \"Select all\")}\n            </Button>\n          </div>\n        </div>\n\n        {/* Groups */}\n        <div className=\"rounded-2xl border border-border bg-background p-4 space-y-3\">\n          <div className=\"text-sm font-semibold text-foreground\">\n            {t(\"loops.groups\", \"Groups\")}\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            {GROUPS.map((g) => {\n              const groupPlatforms = platformsByGroup(g.id);\n              const countSelected = groupPlatforms.filter((p) =>\n                selectedSet.has(p)\n              ).length;\n              const isAll =\n                countSelected === groupPlatforms.length &&\n                groupPlatforms.length > 0;\n\n              return (\n                <button\n                  key={g.id}\n                  type=\"button\"\n                  onClick={() => toggleGroup(g.id)}\n                  disabled={disabled || isSaving}\n                  className={[\n                    \"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs transition-colors\",\n                    isAll\n                      ? \"border-primary/50 bg-primary/10 text-foreground\"\n                      : \"border-border bg-card text-muted-foreground\",\n                    disabled || isSaving\n                      ? \"opacity-50 cursor-not-allowed\"\n                      : \"hover:bg-muted/40\",\n                  ].join(\" \")}\n                >\n                  <span className=\"font-medium\">{g.title}</span>\n                  <span className=\"text-[11px] text-muted-foreground\">\n                    {countSelected}/{groupPlatforms.length}\n                  </span>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* All Platforms */}\n        <div className=\"rounded-2xl border border-border bg-background p-4 space-y-3\">\n          <div className=\"text-sm font-semibold text-foreground\">\n            {t(\"loops.platforms\", \"Platforms\")}\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-2 md:grid-cols-2\">\n            {sortByLabel(ALL_PLATFORMS).map((p) => {\n              const checked = selectedSet.has(p);\n              const label = PLATFORM_LABEL_BY_ID[p] ?? p;\n\n              return (\n                <label\n                  key={p}\n                  className={[\n                    \"flex items-center gap-3 rounded-xl border px-3 py-2 text-sm\",\n                    checked\n                      ? \"border-primary/40 bg-primary/5\"\n                      : \"border-border bg-card\",\n                    disabled || isSaving\n                      ? \"opacity-50 cursor-not-allowed\"\n                      : \"hover:bg-muted/30\",\n                  ].join(\" \")}\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={checked}\n                    onChange={() => toggle(p)}\n                    disabled={disabled || isSaving}\n                  />\n                  <span className=\"text-foreground\">{label}</span>\n                </label>\n              );\n            })}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"default\"\n            shadow=\"sm\"\n            shape=\"lg\"\n            onClick={handleSave}\n            disabled={!canSave}\n          >\n            {isSaving ? t(\"loops.saving\", \"Saving...\") : t(\"loops.save\", \"Save\")}\n          </Button>\n          <Button\n            variant=\"outline\"\n            shape=\"lg\"\n            onClick={() => onOpenChange(false)}\n            disabled={disabled || isSaving}\n          >\n            {t(\"loops.cancel\", \"Cancel\")}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { Button, FormField, Input } from \"src/shared/ui\";\n\nimport type { CanonicalFilters } from \"../../model\";\n\nconst RADIUS_OPTIONS: CanonicalFilters[\"radiusKm\"][] = [5, 10, 20, 30, 50, 100];\nconst POSTED_WITHIN_OPTIONS: CanonicalFilters[\"postedWithin\"][] = [\n  1, 3, 7, 14, 30,\n];\n\ntype Option<T> = { value: T; label: string };\n\ntype Props = {\n  value: CanonicalFilters;\n  onChange: (next: CanonicalFilters) => void;\n\n  onApply: () => void;\n  onReset: () => void;\n\n  disabled?: boolean;\n};\n\nfunction parseKeywordLine(v: string) {\n  return v.replace(/\\s+/g, \" \").trim();\n}\n\nexport function CompactFilters({\n  value,\n  onChange,\n  onApply,\n  onReset,\n  disabled,\n}: Props) {\n  const { t } = useTranslation();\n  const [advancedOpen, setAdvancedOpen] = useState(false);\n\n  const workModeOptions: Array<Option<CanonicalFilters[\"workMode\"]>> = useMemo(\n    () => [\n      { value: \"any\", label: t(\"loops.workMode.any\", \"Any\") },\n      { value: \"onsite\", label: t(\"loops.workMode.onsite\", \"On-site\") },\n      { value: \"hybrid\", label: t(\"loops.workMode.hybrid\", \"Hybrid\") },\n      { value: \"remote\", label: t(\"loops.workMode.remote\", \"Remote\") },\n      {\n        value: \"remote_only\",\n        label: t(\"loops.workMode.remoteOnly\", \"Remote-only\"),\n      },\n    ],\n    [t]\n  );\n\n  const seniorityOptions: Array<Option<CanonicalFilters[\"seniority\"]>> = useMemo(\n    () => [\n      { value: \"intern\", label: t(\"loops.seniority.intern\", \"Intern\") },\n      { value: \"junior\", label: t(\"loops.seniority.junior\", \"Junior\") },\n      { value: \"mid\", label: t(\"loops.seniority.mid\", \"Mid\") },\n      { value: \"senior\", label: t(\"loops.seniority.senior\", \"Senior\") },\n      { value: \"lead\", label: t(\"loops.seniority.lead\", \"Lead\") },\n    ],\n    [t]\n  );\n\n  const employmentOptions: Array<Option<CanonicalFilters[\"employmentType\"]>> =\n    useMemo(\n      () => [\n        {\n          value: \"full_time\",\n          label: t(\"loops.employment.fullTime\", \"Full-time\"),\n        },\n        {\n          value: \"part_time\",\n          label: t(\"loops.employment.partTime\", \"Part-time\"),\n        },\n        { value: \"contract\", label: t(\"loops.employment.contract\", \"Contract\") },\n        {\n          value: \"internship\",\n          label: t(\"loops.employment.internship\", \"Internship\"),\n        },\n        {\n          value: \"ausbildung\",\n          label: t(\"loops.employment.ausbildung\", \"Ausbildung\"),\n        },\n      ],\n      [t]\n    );\n\n  const languageOptions: Array<Option<CanonicalFilters[\"language\"]>> = useMemo(\n    () => [\n      { value: \"any\", label: t(\"loops.language.any\", \"Any\") },\n      { value: \"de\", label: t(\"loops.language.de\", \"DE\") },\n      { value: \"en\", label: t(\"loops.language.en\", \"EN\") },\n    ],\n    [t]\n  );\n\n  const badges = useMemo(() => {\n    const out: string[] = [];\n    const role = value.role.trim();\n    const location = value.location.trim();\n\n    if (role)\n      out.push(t(\"loops.badgeRole\", \"Role: {{value}}\", { value: role }));\n    if (location)\n      out.push(t(\"loops.badgeLoc\", \"Loc: {{value}}\", { value: location }));\n\n    out.push(\n      t(\"loops.badgeRadius\", \"Radius: {{value}}km\", { value: value.radiusKm })\n    );\n\n    if (value.workMode !== \"any\")\n      out.push(t(\"loops.badgeMode\", \"Mode: {{value}}\", { value: value.workMode }));\n\n    out.push(\n      t(\"loops.badgePosted\", \"Posted: {{value}}d\", { value: value.postedWithin })\n    );\n\n    return out;\n  }, [t, value]);\n\n  return (\n    <div className=\"rounded-2xl border border-border bg-card p-6 space-y-4\">\n      <div className=\"flex items-start justify-between gap-4\">\n        <div>\n          <div className=\"text-base font-semibold text-foreground\">\n            {t(\"loops.filtersTitle\", \"Filters\")}\n          </div>\n          <div className=\"mt-1 text-sm text-muted-foreground\">\n            {t(\n              \"loops.filtersSubtitle\",\n              \"Update  Apply  links refresh & saved to loop.\"\n            )}\n          </div>\n\n          {badges.length ? (\n            <div className=\"mt-2 flex flex-wrap gap-2\">\n              {badges.map((b) => (\n                <span\n                  key={b}\n                  className=\"rounded-full border border-border bg-background px-3 py-1 text-xs text-muted-foreground\"\n                >\n                  {b}\n                </span>\n              ))}\n            </div>\n          ) : null}\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"default\"\n            shadow=\"sm\"\n            shape=\"lg\"\n            onClick={onApply}\n            disabled={disabled}\n          >\n            {t(\"loops.apply\", \"Apply\")}\n          </Button>\n          <Button\n            variant=\"outline\"\n            shape=\"lg\"\n            onClick={onReset}\n            disabled={disabled}\n          >\n            {t(\"loops.reset\", \"Reset\")}\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-3 md:grid-cols-12\">\n        <div className=\"md:col-span-5\">\n          <FormField label={t(\"loops.professionRole\", \"Profession / Role\")}>\n            <Input\n              value={value.role}\n              onChange={(e) => onChange({ ...value, role: e.target.value })}\n              placeholder={t(\n                \"loops.professionRolePlaceholder\",\n                \"Fachinformatiker OR React Developer\"\n              )}\n              disabled={disabled}\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-4\">\n          <FormField label={t(\"loops.location\", \"Location\")}>\n            <Input\n              value={value.location}\n              onChange={(e) => onChange({ ...value, location: e.target.value })}\n              placeholder={t(\"loops.locationPlaceholder\", \"Berlin\")}\n              disabled={disabled}\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label={t(\"loops.radius\", \"Radius\")}>\n            <select\n              value={value.radiusKm}\n              onChange={(e) =>\n                onChange({\n                  ...value,\n                  radiusKm: Number(e.target.value) as CanonicalFilters[\"radiusKm\"],\n                })\n              }\n              className=\"h-10 w-full rounded-xl border border-border bg-input px-3 text-sm text-foreground\"\n              disabled={disabled}\n            >\n              {RADIUS_OPTIONS.map((r) => (\n                <option key={r} value={r}>\n                  {t(\"loops.km\", \"{{value}} km\", { value: r })}\n                </option>\n              ))}\n            </select>\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-1\">\n          <FormField label=\" \" hint=\"\">\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              className=\"w-full\"\n              onClick={() => setAdvancedOpen((v) => !v)}\n              disabled={disabled}\n            >\n              {advancedOpen\n                ? t(\"loops.less\", \"Less\")\n                : t(\"loops.more\", \"More\")}\n            </Button>\n          </FormField>\n        </div>\n      </div>\n\n      {advancedOpen ? (\n        <div className=\"rounded-2xl border border-border bg-background p-4 space-y-4\">\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-12\">\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.workModeTitle\", \"Work mode\")}>\n                <select\n                  value={value.workMode}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      workMode: e.target.value as CanonicalFilters[\"workMode\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {workModeOptions.map((o) => (\n                    <option key={o.value} value={o.value}>\n                      {o.label}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.seniorityTitle\", \"Seniority\")}>\n                <select\n                  value={value.seniority}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      seniority: e.target.value as CanonicalFilters[\"seniority\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {seniorityOptions.map((o) => (\n                    <option key={o.value} value={o.value}>\n                      {o.label}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.employmentType\", \"Employment type\")}>\n                <select\n                  value={value.employmentType}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      employmentType: e.target.value as CanonicalFilters[\"employmentType\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {employmentOptions.map((o) => (\n                    <option key={o.value} value={o.value}>\n                      {o.label}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.postedWithin\", \"Posted within\")}>\n                <select\n                  value={value.postedWithin}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      postedWithin: Number(\n                        e.target.value\n                      ) as CanonicalFilters[\"postedWithin\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {POSTED_WITHIN_OPTIONS.map((d) => (\n                    <option key={d} value={d}>\n                      {t(\"loops.days\", \"{{value}} days\", { value: d })}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-12\">\n            <div className=\"md:col-span-6\">\n              <FormField\n                label={t(\"loops.includeKeywords\", \"Include keywords\")}\n                hint={t(\n                  \"loops.includeKeywordsHint\",\n                  \"Optional, will be appended to search query\"\n                )}\n              >\n                <Input\n                  value={value.includeKeywords}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      includeKeywords: parseKeywordLine(e.target.value),\n                    })\n                  }\n                  placeholder={t(\"loops.includeKeywordsPlaceholder\", \"react typescript next\")}\n                  disabled={disabled}\n                />\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-6\">\n              <FormField\n                label={t(\"loops.excludeKeywords\", \"Exclude keywords\")}\n                hint={t(\n                  \"loops.excludeKeywordsHint\",\n                  \"Optional, will be appended as exclusions\"\n                )}\n              >\n                <Input\n                  value={value.excludeKeywords}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      excludeKeywords: parseKeywordLine(e.target.value),\n                    })\n                  }\n                  placeholder={t(\n                    \"loops.excludeKeywordsPlaceholder\",\n                    \"senior lead manager zeitarbeit\"\n                  )}\n                  disabled={disabled}\n                />\n              </FormField>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-12\">\n            <div className=\"md:col-span-3\">\n              <FormField label={t(\"loops.languageTitle\", \"Language\")}>\n                <select\n                  value={value.language}\n                  onChange={(e) =>\n                    onChange({\n                      ...value,\n                      language: e.target.value as CanonicalFilters[\"language\"],\n                    })\n                  }\n                  className=\"h-10 w-full rounded-xl border border-border bg-card px-3 text-sm text-foreground\"\n                  disabled={disabled}\n                >\n                  {languageOptions.map((o) => (\n                    <option key={o.value} value={o.value}>\n                      {o.label}\n                    </option>\n                  ))}\n                </select>\n              </FormField>\n            </div>\n\n            <div className=\"md:col-span-4 flex items-end\">\n              <label className=\"flex items-center gap-2 text-sm text-foreground\">\n                <input\n                  type=\"checkbox\"\n                  checked={value.excludeAgencies}\n                  onChange={(e) =>\n                    onChange({ ...value, excludeAgencies: e.target.checked })\n                  }\n                  disabled={disabled}\n                />\n                {t(\"loops.excludeAgencies\", \"Exclude agencies / Zeitarbeit\")}\n              </label>\n            </div>\n\n            <div className=\"md:col-span-5\" />\n          </div>\n\n          <div className=\"text-xs text-muted-foreground\">\n            {t(\n              \"loops.advancedInfo\",\n              \"Advanced filters are stored in loop.filters. URL builders can be extended later per platform.\"\n            )}\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport { Modal } from \"src/shared/ui\";\n\nimport type { CanonicalFilters } from \"../../model\";\nimport { CompactFilters } from \"../CompactFilters/CompactFilters\";\n\ntype Props = {\n  open: boolean;\n  onOpenChange: (v: boolean) => void;\n\n  value: CanonicalFilters;\n  onChange: (next: CanonicalFilters) => void;\n\n  onApply: () => Promise<void> | void;\n  onReset: () => void;\n\n  disabled?: boolean;\n};\n\nexport function LoopSettingsModal({\n  open,\n  onOpenChange,\n  value,\n  onChange,\n  onApply,\n  onReset,\n  disabled,\n}: Props) {\n  const { t } = useTranslation();\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      title={t(\"loops.myLoopSettings\", \"My Loop settings\")}\n      description={t(\n        \"loops.myLoopSettingsDescription\",\n        \"Update filters, click Apply to refresh links and save settings to your loop.\"\n      )}\n      size=\"lg\"\n    >\n      <CompactFilters\n        value={value}\n        onChange={onChange}\n        onApply={onApply}\n        onReset={onReset}\n        disabled={disabled}\n      />\n    </Modal>\n  );\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport { Button } from \"src/shared/ui\";\n\nimport type { LoopPlatform } from \"../../../model\";\nimport { PLATFORM_LABEL_BY_ID } from \"../../../model/platformRegistry\";\n\ntype Props = {\n  platform: LoopPlatform;\n  url: string;\n  isActive: boolean;\n\n  onOpen: () => void;\n  onAdd: () => void;\n\n  addDisabled?: boolean;\n};\n\nexport function PlatformLinkCard({\n  platform,\n  url,\n  isActive,\n  onOpen,\n  onAdd,\n  addDisabled,\n}: Props) {\n  const { t } = useTranslation();\n  const label = PLATFORM_LABEL_BY_ID[platform] ?? platform;\n\n  return (\n    <div\n      className={[\n        \"rounded-2xl border bg-background p-4 space-y-3\",\n        isActive ? \"border-primary/50 ring-1 ring-primary/30\" : \"border-border\",\n      ].join(\" \")}\n    >\n      <div className=\"flex items-start justify-between gap-3\">\n        <div className=\"min-w-0\">\n          <div className=\"text-sm font-semibold text-foreground truncate\">\n            {label}\n          </div>\n          <div className=\"text-xs text-muted-foreground truncate\">{url}</div>\n        </div>\n\n        <div className=\"flex items-center gap-2 shrink-0\">\n          <Button variant=\"outline\" shape=\"lg\" onClick={onOpen}>\n            {t(\"loops.open\", \"Open\")}\n          </Button>\n          <Button\n            variant=\"default\"\n            shape=\"lg\"\n            shadow=\"sm\"\n            onClick={onAdd}\n            disabled={addDisabled}\n          >\n            {t(\"loops.add\", \"Add\")}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\n\nimport {\n  buildCanonicalFiltersFromLoop,\n  mapCanonicalToSearchFilters,\n  buildSearchLinks,\n} from \"src/entities/loop/lib\";\nimport {\n  type CanonicalFilters,\n  DEFAULT_CANONICAL_FILTERS,\n  type LoopPlatform,\n} from \"src/entities/loop/model\";\n\nimport type { ActiveLink, LoopForLinks } from \"./types\";\n\nfunction filtersEqual(a: CanonicalFilters, b: CanonicalFilters) {\n  const keys = Object.keys(DEFAULT_CANONICAL_FILTERS) as Array<keyof CanonicalFilters>;\n  for (const k of keys) {\n    if (a[k] !== b[k]) return false;\n  }\n  return true;\n}\n\nexport function useLoopSearchLinksState(loop: LoopForLinks) {\n  const baseFromLoop = useMemo(() => buildCanonicalFiltersFromLoop(loop), [loop]);\n\n  const [draftFilters, _setDraftFilters] = useState<CanonicalFilters>(() => baseFromLoop);\n  const [appliedFilters, setAppliedFilters] = useState<CanonicalFilters>(() => baseFromLoop);\n  const [activeLink, setActiveLink] = useState<ActiveLink>(null);\n  const [isDirty, setIsDirty] = useState(false);\n\n\n  useEffect(() => {\n    _setDraftFilters(baseFromLoop);\n    setAppliedFilters(baseFromLoop);\n    setActiveLink(null);\n    setIsDirty(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loop.id]);\n\n  // loop updated (same id) -> sync only if no unsaved edits\n  useEffect(() => {\n    if (isDirty) return;\n\n    _setDraftFilters((prev) => (filtersEqual(prev, baseFromLoop) ? prev : baseFromLoop));\n    setAppliedFilters((prev) => (filtersEqual(prev, baseFromLoop) ? prev : baseFromLoop));\n    setActiveLink(null);\n  }, [baseFromLoop, isDirty]);\n\n  const setDraftFilters = useCallback(\n    (next: CanonicalFilters) => {\n      _setDraftFilters(next);\n      setIsDirty(!filtersEqual(next, baseFromLoop));\n    },\n    [baseFromLoop]\n  );\n\n  const links = useMemo(() => {\n    return buildSearchLinks(loop.platforms, mapCanonicalToSearchFilters(appliedFilters));\n  }, [loop.platforms, appliedFilters]);\n\n  const resetFilters = useCallback(() => {\n    _setDraftFilters(baseFromLoop);\n    setAppliedFilters(baseFromLoop);\n    setActiveLink(null);\n    setIsDirty(false);\n  }, [baseFromLoop]);\n\n  const applyDraftFilters = useCallback(() => {\n    setAppliedFilters(draftFilters);\n    setActiveLink(null);\n    setIsDirty(false);\n  }, [draftFilters]);\n\n  const setActive = useCallback((platform: LoopPlatform, url: string) => {\n    setActiveLink({ platform, url });\n  }, []);\n\n  return {\n    draftFilters,\n    setDraftFilters,\n\n    appliedFilters,\n    applyDraftFilters,\n    resetFilters,\n\n    activeLink,\n    setActiveLink,\n    setActive,\n\n    links,\n  };\n}\n","import React, { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { clampPage } from \"src/shared/lib\";\nimport { getErrorMessage } from \"src/shared/lib/errors\";\nimport { Button, Pagination } from \"src/shared/ui\";\n\nimport { useUpdateLoopMutation } from \"../../api/loopApi\";\nimport { mapWorkModeToRemoteMode, openUrl } from \"../../lib\";\nimport { normalizeRoleToTitles, type CanonicalFilters, type Loop, type LoopPlatform } from \"../../model\";\nimport { AddMatchModal } from \"../AddMatchModal/AddMatchModal\";\nimport { EditSourcesModal } from \"../EditSourcesModal/EditSourcesModal\";\nimport { LoopSettingsModal } from \"../LoopSettingsModal/LoopSettingsModal\";\n\nimport { PlatformLinkCard } from \"./components/PlatformLinkCard\";\nimport type { LoopForLinks } from \"./types\";\nimport { useLoopSearchLinksState } from \"./useLoopSearchLinksState\";\n\ntype Props = {\n  loop: Pick<\n    Loop,\n    | \"id\"\n    | \"name\"\n    | \"titles\"\n    | \"location\"\n    | \"radiusKm\"\n    | \"platforms\"\n    | \"remoteMode\"\n    | \"filters\"\n  >;\n  userId: string | null;\n  page: number;\n  onPageChange: (page: number) => void;\n};\n\n\n\nfunction isNonEmptyString(x: unknown): x is string {\n  return typeof x === \"string\" && x.trim().length > 0;\n}\n\nfunction getSafeFilterString(\n  f: CanonicalFilters,\n  key: \"role\" | \"location\"\n): string {\n  const v = (f as unknown as Record<string, unknown>)[key];\n  return typeof v === \"string\" ? v : \"\";\n}\n\nfunction getSafeFilterNumber(f: CanonicalFilters, key: \"radiusKm\" | \"postedWithin\"): number {\n  const v = (f as unknown as Record<string, unknown>)[key];\n  const n = typeof v === \"number\" ? v : Number(v);\n  return Number.isFinite(n) ? n : 0;\n}\n\nfunction getSafeFilterWorkMode(f: CanonicalFilters): string {\n  const v = (f as unknown as Record<string, unknown>)[\"workMode\"];\n  return typeof v === \"string\" ? v : \"any\";\n}\n\nexport function LoopSearchLinks({ loop, userId, page, onPageChange }: Props) {\n  const { t } = useTranslation();\n  const [updateLoop, updateState] = useUpdateLoopMutation();\n\n  const [isSourcesModalOpen, setIsSourcesModalOpen] = useState(false);\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [isAddMatchModalOpen, setIsAddMatchModalOpen] = useState(false);\n  const [defaultPlatform, setDefaultPlatform] = useState<LoopPlatform | undefined>(\n    undefined\n  );\n\n\n  const loopForState: LoopForLinks = {\n    id: loop.id,\n    titles: loop.titles,\n    location: loop.location ?? null,\n    radiusKm: loop.radiusKm ?? null,\n    platforms: loop.platforms,\n    remoteMode: loop.remoteMode,\n    filters: loop.filters, \n  };\n\n  const {\n    draftFilters,\n    setDraftFilters,\n    applyDraftFilters,\n    resetFilters,\n    appliedFilters,\n    activeLink,\n    setActive,\n    links,\n  } = useLoopSearchLinksState(loopForState);\n\n  const isSaving = updateState.isLoading;\n  const canEditSources = Boolean(userId) && !isSaving;\n\n  const pageSize = 12;\n  const totalPages = Math.max(1, Math.ceil(links.length / pageSize));\n  const safePage = Math.max(1, Math.min(totalPages, clampPage(page)));\n  const offset = (safePage - 1) * pageSize;\n\n  const info = useMemo(() => {\n    if (links.length === 0) return { from: 0, to: 0 };\n    const from = offset + 1;\n    const to = Math.min(links.length, offset + pageSize);\n    return { from, to };\n  }, [links.length, offset, pageSize]);\n\n  const pagedLinks = useMemo(() => {\n    return links.slice(offset, offset + pageSize);\n  }, [links, offset, pageSize]);\n\n  const handleApply = async () => {\n    applyDraftFilters();\n    onPageChange(1);\n\n    if (!userId) return;\n\n    try {\n      await updateLoop({\n        loopId: loop.id,\n        name: loop.name,\n        titles: normalizeRoleToTitles(draftFilters.role),\n        location: draftFilters.location,\n        radiusKm: draftFilters.radiusKm,\n        remoteMode: mapWorkModeToRemoteMode(draftFilters.workMode),\n        filters: draftFilters,\n      }).unwrap();\n\n      setIsSettingsOpen(false);\n    } catch (err) {\n      console.error(\"Failed to save filters:\", getErrorMessage(err));\n    }\n  };\n\n  const appliedBadges = useMemo(() => {\n    const out: string[] = [];\n\n    const role = getSafeFilterString(appliedFilters, \"role\").trim();\n    const location = getSafeFilterString(appliedFilters, \"location\").trim();\n    const radiusKm = getSafeFilterNumber(appliedFilters, \"radiusKm\");\n    const workMode = getSafeFilterWorkMode(appliedFilters);\n    const postedWithin = getSafeFilterNumber(appliedFilters, \"postedWithin\");\n\n    if (isNonEmptyString(role)) out.push(t(\"loops.badgeRole\", \"Role: {{value}}\", { value: role }));\n    if (isNonEmptyString(location))\n      out.push(t(\"loops.badgeLoc\", \"Loc: {{value}}\", { value: location }));\n\n    out.push(\n      t(\"loops.badgeRadius\", \"Radius: {{value}}km\", {\n        value: radiusKm,\n      })\n    );\n\n    if (workMode !== \"any\")\n      out.push(\n        t(\"loops.badgeMode\", \"Mode: {{value}}\", {\n          value: workMode,\n        })\n      );\n\n    out.push(\n      t(\"loops.badgePosted\", \"Posted: {{value}}d\", {\n        value: postedWithin,\n      })\n    );\n\n    return out;\n  }, [appliedFilters, t]);\n\n  const openAddModal = (platform?: LoopPlatform) => {\n    setDefaultPlatform(platform);\n    setIsAddMatchModalOpen(true);\n  };\n\n  const handleOpenLink = (platform: LoopPlatform, url: string) => {\n    setActive(platform, url);\n    openUrl(url);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <LoopSettingsModal\n        open={isSettingsOpen}\n        onOpenChange={setIsSettingsOpen}\n        value={draftFilters}\n        onChange={setDraftFilters}\n        disabled={isSaving}\n        onApply={handleApply}\n        onReset={() => {\n          resetFilters();\n          onPageChange(1);\n        }}\n      />\n\n      <div className=\"rounded-2xl border border-border bg-card p-6 space-y-4\">\n        <div className=\"flex items-start justify-between gap-3\">\n          <div className=\"flex flex-col gap-1\">\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <h3 className=\"text-base font-semibold text-foreground\">\n                {t(\"loops.searchLinksTitle\", \"Search links\")}\n              </h3>\n\n              <span className=\"inline-flex items-center rounded-full border border-border bg-muted/40 px-2.5 py-0.5 text-xs font-medium text-muted-foreground\">\n                {t(\"loops.showing\", \"Showing {{from}}{{to}} of {{total}}\", {\n                  from: info.from,\n                  to: info.to,\n                  total: links.length,\n                })}\n              </span>\n            </div>\n\n            <p className=\"text-sm text-muted-foreground\">\n              {t(\n                \"loops.searchLinksSubtitle\",\n                \"Apply filters  open platform  pick a job  paste URL  save match.\"\n              )}\n            </p>\n\n            {appliedBadges.length ? (\n              <div className=\"mt-2 flex flex-wrap gap-2\">\n                {appliedBadges.map((b) => (\n                  <span\n                    key={b}\n                    className=\"rounded-full border border-border bg-background px-3 py-1 text-xs text-muted-foreground\"\n                  >\n                    {b}\n                  </span>\n                ))}\n              </div>\n            ) : null}\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              onClick={() => setIsSettingsOpen(true)}\n              disabled={isSaving}\n            >\n              {t(\"loops.myLoopSettings\", \"My Loop settings\")}\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              shape=\"lg\"\n              onClick={() => setIsSourcesModalOpen(true)}\n              disabled={!canEditSources}\n            >\n              {t(\"loops.editSources\", \"Edit sources\")}\n            </Button>\n\n            <Button\n              variant=\"default\"\n              shape=\"lg\"\n              shadow=\"sm\"\n              onClick={() => openAddModal(undefined)}\n              disabled={!userId}\n            >\n              {t(\"loops.addMatch\", \"Add match\")}\n            </Button>\n          </div>\n\n          <EditSourcesModal\n            open={isSourcesModalOpen}\n            onOpenChange={setIsSourcesModalOpen}\n            value={loop.platforms}\n            disabled={!canEditSources}\n            onSave={async (nextPlatforms) => {\n              if (!userId) return;\n              try {\n                await updateLoop({\n                  loopId: loop.id,\n                  platforms: nextPlatforms,\n                }).unwrap();\n              } catch (err) {\n                console.error(\"Failed to update sources:\", getErrorMessage(err));\n              }\n            }}\n          />\n        </div>\n\n        <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\n          {pagedLinks.map((link) => {\n            const isActive =\n              activeLink?.platform === link.platform && activeLink?.url === link.url;\n\n            return (\n              <PlatformLinkCard\n                key={`${link.platform}:${link.url}`}\n                platform={link.platform}\n                url={link.url}\n                isActive={isActive}\n                onOpen={() => handleOpenLink(link.platform, link.url)}\n                onAdd={() => openAddModal(link.platform)}\n                addDisabled={!userId}\n              />\n            );\n          })}\n        </div>\n\n        <div className=\"flex items-center justify-center\">\n          <Pagination\n            page={safePage}\n            totalPages={totalPages}\n            onPageChange={onPageChange}\n            disabled={isSaving}\n          />\n        </div>\n\n        <AddMatchModal\n          open={isAddMatchModalOpen}\n          onOpenChange={setIsAddMatchModalOpen}\n          loopId={loop.id}\n          defaultPlatform={defaultPlatform}\n        />\n      </div>\n    </div>\n  );\n}\n","import type { SearchFilters, LoopPlatform } from \"src/entities/loop/model\";\nimport { buildUrlByPlatform } from \"src/entities/loop/model/\";\n\nexport type SearchLink = { platform: LoopPlatform; url: string };\n\nexport function buildSearchLinks(\n  platforms: LoopPlatform[],\n  filters: SearchFilters\n): SearchLink[] {\n  return platforms.map((p) => ({\n    platform: p,\n    url: buildUrlByPlatform(p, filters),\n  }));\n}\n\nexport function openUrl(url: string) {\n  window.open(url, \"_blank\", \"noopener,noreferrer\");\n}\n","import type { CanonicalFilters, SearchFilters } from \"src/entities/loop/model\";\n\nexport function mapCanonicalToSearchFilters(\n  filters: CanonicalFilters\n): SearchFilters {\n  const roleWithIncludes = [filters.role, filters.includeKeywords]\n    .filter(Boolean)\n    .join(\" \")\n    .trim();\n\n  const excludes = (filters.excludeKeywords || \"\")\n    .split(/\\s+/g)\n    .filter(Boolean)\n    .map((word) => (word.startsWith(\"-\") ? word : `-${word}`))\n    .join(\" \");\n\n  return {\n    role: [roleWithIncludes, excludes].filter(Boolean).join(\" \").trim(),\n    location: filters.location,\n    radiusKm: Number(filters.radiusKm),\n    workMode: filters.workMode === \"remote_only\" ? \"remote_only\" : \"any\",\n  };\n}\n","import type { CanonicalFilters, RemoteMode } from \"src/entities/loop/model\";\n\nexport function mapWorkModeToRemoteMode(\n  workMode: CanonicalFilters[\"workMode\"]\n): RemoteMode {\n  return workMode === \"remote_only\" ? \"remote_only\" : \"any\";\n}\n","import { useEffect, useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\nimport { useAppDispatch, useAppSelector } from \"src/app/store/hooks\";\nimport { useGetLoopQuery } from \"src/entities/loop/api/loopApi\";\nimport { joinTitles } from \"src/entities/loop/lib\";\nimport type { Loop } from \"src/entities/loop/model\";\nimport { LoopSearchLinks } from \"src/entities/loop/ui/LoopSearchLinks/LoopSearchLinks\";\nimport {\n  setLastLoopsUrl,\n  setLoopDetailsPage,\n} from \"src/pages/LoopsPage/model/loopsUiSlice\";\nimport { getErrorMessage } from \"src/shared/lib\";\nimport { updateURLParams } from \"src/shared/lib/url/updateURLParams\";\nimport { Button } from \"src/shared/ui\";\n\nimport { Header, CardText } from \"./Header\";\n\nexport function LoopDetailsView({\n  userId,\n  loopId,\n  onBack,\n}: {\n  userId: string;\n  loopId: string;\n  onBack: () => void;\n}) {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const dispatch = useAppDispatch();\n\n  const savedDetailsPage = useAppSelector(\n    (s) => s.loopsUi.detailsPageByLoopId[loopId],\n  );\n\n  const readPageFromSearch = (search: string): number | null => {\n    try {\n      const sp = new URLSearchParams(search);\n      const raw = sp.get(\"page\");\n      const n = raw ? Number(raw) : NaN;\n      const i = Number.isFinite(n) ? Math.trunc(n) : NaN;\n      return i > 0 ? i : null;\n    } catch {\n      return null;\n    }\n  };\n\n  const urlPage = readPageFromSearch(location.search);\n  const detailsPage = urlPage ?? savedDetailsPage ?? 1;\n\n  //  page   URL   (replace),    \n  useEffect(() => {\n    if (urlPage !== null) return;\n\n    updateURLParams(\n      navigate,\n      location,\n      { page: String(detailsPage) },\n      { replace: true },\n    );\n  }, [urlPage, detailsPage, navigate, location]);\n\n  //  Redux     \n  useEffect(() => {\n    dispatch(setLoopDetailsPage({ loopId, page: detailsPage }));\n    dispatch(setLastLoopsUrl(`${location.pathname}${location.search}`));\n  }, [dispatch, loopId, detailsPage, location.pathname, location.search]);\n\n  const loopQ = useGetLoopQuery({ loopId });\n  const loop: Loop | null = loopQ.data ?? null;\n\n  const title = useMemo(\n    () => loop?.name ?? t(\"loops.detailsTitle\", \"Loop\"),\n    [loop?.name, t],\n  );\n\n  const subtitle = useMemo(() => {\n    if (!loop) {\n      return t(\n        \"loops.detailsHint\",\n        \"Change filters  Apply  links update and filters persist.\",\n      );\n    }\n\n    const roles = joinTitles(loop.titles) || t(\"loops.dash\", \"\");\n    const remoteText =\n      loop.remoteMode === \"remote_only\"\n        ? t(\"loops.remoteOnly\", \"Remote\")\n        : t(\"loops.any\", \"Any\");\n\n    return `${roles}  ${loop.location}  ${remoteText}`;\n  }, [loop, t]);\n\n  const content = useMemo(() => {\n    if (loopQ.isLoading) {\n      return <CardText>{t(\"loops.loadingLoop\", \"Loading loop\")}</CardText>;\n    }\n\n    if (loopQ.isError) {\n      return <CardText>{getErrorMessage(loopQ.error)}</CardText>;\n    }\n\n    if (!loop) {\n      return <CardText>{t(\"loops.notFound\", \"Loop not found.\")}</CardText>;\n    }\n\n    return (\n      <LoopSearchLinks\n        userId={userId}\n        page={detailsPage}\n        onPageChange={(p) => {\n          dispatch(setLoopDetailsPage({ loopId, page: p }));\n          updateURLParams(\n            navigate,\n            location,\n            { page: String(p) },\n            { replace: true },\n          );\n        }}\n        loop={{\n          id: loop.id,\n          name: loop.name,\n          titles: loop.titles,\n          location: loop.location,\n          radiusKm: loop.radiusKm,\n          platforms: loop.platforms,\n          remoteMode: loop.remoteMode,\n          filters: loop.filters,\n        }}\n      />\n    );\n  }, [\n    loopQ.isLoading,\n    loopQ.isError,\n    loopQ.error,\n    loop,\n    t,\n    userId,\n    detailsPage,\n    dispatch,\n    loopId,\n    navigate,\n    location,\n  ]);\n\n  return (\n    <div className=\"space-y-6\">\n      <Header\n        title={title}\n        subtitle={subtitle}\n        right={\n          <Button variant=\"outline\" shape=\"lg\" onClick={onBack}>\n            {t(\"loops.back\", \"Back\")}\n          </Button>\n        }\n      />\n\n      {content}\n    </div>\n  );\n}\n","import { skipToken } from \"@reduxjs/toolkit/query\";\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\nimport { useAppDispatch, useAppSelector } from \"src/app/store/hooks\";\nimport { CreateLoopModal } from \"src/entities/loop\";\nimport {\n  useGetLoopsPageQuery,\n  useLazyGetLoopsPageQuery,\n} from \"src/entities/loop/api/loopApi\";\nimport { joinTitles } from \"src/entities/loop/lib/format\";\nimport {\n  setLastLoopsUrl,\n  setLoopsListPage,\n} from \"src/pages/LoopsPage/model/loopsUiSlice\";\nimport { getErrorMessage, clampPage} from \"src/shared/lib\";\nimport { Button, Pagination, PageHeader } from \"src/shared/ui\";\n\nconst PAGE_SIZE = 7;\n\ntype CursorMap = Record<number, string | null | undefined>; // page -> cursorId\n\n\nfunction readPageParam(search: string): number | null {\n  const sp = new URLSearchParams(search);\n  const raw = sp.get(\"page\");\n  if (!raw) return null;\n  const n = Number(raw);\n  return clampPage(n);\n}\n\nfunction writePageToSearch(search: string, page: number): string {\n  const sp = new URLSearchParams(search);\n  sp.set(\"page\", String(clampPage(page)));\n  const s = sp.toString();\n  return s ? `?${s}` : \"\";\n}\n\nexport function LoopsListView({\n  userId,\n  onOpenLoop,\n}: {\n  userId: string;\n  onOpenLoop: (id: string) => void;\n}) {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const dispatch = useAppDispatch();\n\n  const savedListPage = useAppSelector((s) => s.loopsUi.listPage);\n\n  const [createOpen, setCreateOpen] = useState(false);\n\n  const page = useMemo(() => {\n    const fromUrl = readPageParam(location.search);\n    return fromUrl ?? clampPage(savedListPage);\n  }, [location.search, savedListPage]);\n\n  const cursorByPageRef = useRef<CursorMap>({ 1: null });\n\n  const [cursorId, setCursorId] = useState<string | null>(null);\n\n  const [fetchLoopsPage] = useLazyGetLoopsPageQuery();\n\n  const syncCursorForPage = useCallback(\n    async (targetPage: number) => {\n      if (!userId) {\n        setCursorId(null);\n        return;\n      }\n\n      if (targetPage <= 1) {\n        cursorByPageRef.current[1] = null;\n        setCursorId(null);\n        return;\n      }\n\n      const cache = cursorByPageRef.current;\n\n      if (cache[targetPage] !== undefined) {\n        setCursorId(cache[targetPage] ?? null);\n        return;\n      }\n\n      if (cache[1] === undefined) cache[1] = null;\n\n      for (let p = 1; p < targetPage; p += 1) {\n        if (cache[p] === undefined) break;\n\n        const cur = cache[p] ?? null;\n\n        const res = await fetchLoopsPage({\n          pageSize: PAGE_SIZE,\n          cursorId: cur,\n        }).unwrap();\n\n        cache[p + 1] = res.nextCursor ?? null;\n\n        if (!res.nextCursor) break;\n      }\n\n      setCursorId(cache[targetPage] ?? null);\n    },\n    [fetchLoopsPage, userId],\n  );\n\n  useEffect(() => {\n    let cancelled = false;\n\n    const run = async () => {\n      try {\n        await syncCursorForPage(page);\n      } catch {\n        // cursorId  ;  loopsPageQ\n      }\n    };\n\n    run().catch(() => {});\n\n    return () => {\n      cancelled = true;\n      if (cancelled) return;\n    };\n  }, [page, syncCursorForPage]);\n\n  const loopsPageQ = useGetLoopsPageQuery(\n    userId ? { pageSize: PAGE_SIZE, cursorId } : skipToken,\n  );\n\n  const data = loopsPageQ.data;\n\n  const items = useMemo(() => data?.items ?? [], [data]);\n  const total = data?.total ?? 0;\n\n  const nextCursor = loopsPageQ.data?.nextCursor ?? null;\n\n  const totalPages = useMemo(() => {\n    const n = Math.ceil(total / PAGE_SIZE);\n    return n <= 0 ? 1 : n;\n  }, [total]);\n\n\n  useEffect(() => {\n    if (!loopsPageQ.data) return;\n    const nextPage = page + 1;\n\n    const cache = cursorByPageRef.current;\n    if (cache[nextPage] === undefined) {\n      cache[nextPage] = nextCursor;\n    }\n  }, [loopsPageQ.data, page, nextCursor]);\n\n\n  useEffect(() => {\n    if (!loopsPageQ.data) return;\n    const clamped = Math.max(1, Math.min(totalPages, page));\n    if (clamped !== page) {\n      const nextSearch = writePageToSearch(location.search, clamped);\n      navigate(\n        { pathname: location.pathname, search: nextSearch },\n        { replace: true },\n      );\n    }\n  }, [\n    loopsPageQ.data,\n    page,\n    totalPages,\n    navigate,\n    location.pathname,\n    location.search,\n  ]);\n\n  //  sync Redux\n  useEffect(() => {\n    dispatch(setLoopsListPage(page));\n    dispatch(setLastLoopsUrl(`${location.pathname}${location.search}`));\n  }, [dispatch, page, location.pathname, location.search]);\n\n  const goToPage = useCallback(\n    async (p: number) => {\n      const next = clampPage(p);\n\n      await syncCursorForPage(next);\n\n      const nextSearch = writePageToSearch(location.search, next);\n      navigate(\n        { pathname: location.pathname, search: nextSearch },\n        { replace: false },\n      );\n    },\n    [navigate, location.pathname, location.search, syncCursorForPage],\n  );\n\n  const showFrom = useMemo(() => {\n    if (total === 0) return 0;\n    return (page - 1) * PAGE_SIZE + 1;\n  }, [page, total]);\n\n  const showTo = useMemo(() => {\n    if (total === 0) return 0;\n    return (page - 1) * PAGE_SIZE + items.length;\n  }, [page, total, items.length]);\n\n  const content = useMemo(() => {\n    if (loopsPageQ.isLoading) {\n      return (\n        <div className=\"text-sm text-muted-foreground\">\n          {t(\"loops.loading\", \"Loading\")}\n        </div>\n      );\n    }\n\n    if (loopsPageQ.isError) {\n      return (\n        <div className=\"text-sm text-muted-foreground\">\n          {getErrorMessage(loopsPageQ.error)}\n        </div>\n      );\n    }\n\n    if (total === 0) {\n      return (\n        <div className=\"text-sm text-muted-foreground\">\n          {t(\"loops.empty\", \"No loops yet. Create your first loop.\")}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"space-y-3\">\n          {items.map((l) => {\n            const titlesText = joinTitles(l.titles) || t(\"loops.dash\", \"\");\n            const remoteText =\n              l.remoteMode === \"remote_only\"\n                ? t(\"loops.remoteOnly\", \"Remote\")\n                : t(\"loops.any\", \"Any\");\n\n            return (\n              <div\n                key={l.id}\n                tabIndex={0}\n                onClick={() => onOpenLoop(l.id)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\" || e.key === \" \") {\n                    e.preventDefault();\n                    onOpenLoop(l.id);\n                  }\n                }}\n                className={[\n                  \"w-full\",\n                  \"rounded-xl border border-border bg-background\",\n                  \"px-4 py-4\",\n                  \"hover:bg-muted transition-colors\",\n                  \"focus:outline-none focus:ring-2 focus:ring-border\",\n                  \"cursor-pointer\",\n                  \"select-none\",\n                ].join(\" \")}\n              >\n                <div className=\"text-sm font-semibold text-foreground\">\n                  {l.name}\n                </div>\n                <div className=\"mt-1 text-xs text-muted-foreground\">\n                  {l.location}  {titlesText}  {remoteText}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        <div className=\"grid grid-cols-3 items-center\">\n          <div className=\"text-xs text-muted-foreground\">\n            {t(\"loops.showing\", \"Showing {{from}}{{to}} of {{total}}\", {\n              from: showFrom,\n              to: showTo,\n              total,\n            })}\n          </div>\n\n          <Pagination\n            page={page}\n            totalPages={totalPages}\n            onPageChange={goToPage}\n            disabled={loopsPageQ.isFetching}\n            siblingCount={1}\n          />\n        </div>\n      </div>\n    );\n  }, [\n    loopsPageQ.isLoading,\n    loopsPageQ.isError,\n    loopsPageQ.error,\n    loopsPageQ.isFetching,\n    items,\n    onOpenLoop,\n    page,\n    showFrom,\n    showTo,\n    t,\n    total,\n    totalPages,\n    goToPage,\n  ]);\n\n  return (\n    <div className=\"space-y-6\">\n      <PageHeader\n        title={t(\"loops.listTitle\", \"My Loops\")}\n        subtitle={t(\"loops.listSubtitle\", \"Create a loop and track matches.\")}\n        right={\n          <Button\n            variant=\"default\"\n            shadow=\"sm\"\n            shape=\"lg\"\n            onClick={() => setCreateOpen(true)}\n          >\n            {t(\"loops.newLoop\", \"New loop\")}\n          </Button>\n        }\n      />\n\n      <div className=\"rounded-2xl border border-border bg-card p-6\">\n        {content}\n      </div>\n\n      <CreateLoopModal\n        open={createOpen}\n        onOpenChange={setCreateOpen}\n        onCreated={(id) => {\n          cursorByPageRef.current = { 1: null };\n          setCursorId(null);\n\n          const nextSearch = writePageToSearch(location.search, 1);\n          navigate(\n            { pathname: location.pathname, search: nextSearch },\n            { replace: true },\n          );\n\n          onOpenLoop(id);\n        }}\n      />\n    </div>\n  );\n}\n","import { useTranslation } from \"react-i18next\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\n\nimport { useAuthSelectors } from \"src/entities/auth\";\nimport { Button } from \"src/shared/ui\";\n\nimport { CardText, Header } from \"./components/Header\";\nimport { LoopDetailsView } from \"./components/LoopDetailsView\";\nimport { LoopsListView } from \"./components/LoopsListView\";\n\nexport default function LoopsPage() {\n  const { t } = useTranslation();\n  const { userId } = useAuthSelectors();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { loopId } = useParams<{ loopId: string }>();\n\n  const isDetails = Boolean(loopId);\n\n  const goBack = () => navigate(`/dashboard/loops${location.search}`);\n  const openLoop = (id: string) =>\n    navigate(`/dashboard/loops/${id}${location.search}`);\n\n  if (!userId) {\n    return (\n      <div className=\"space-y-6\">\n        <Header\n          title={\n            isDetails\n              ? t(\"loops.detailsTitle\", \"Loop\")\n              : t(\"loops.listTitle\", \"My Loops\")\n          }\n          subtitle={t(\"loops.signInSubtitle\", \"Sign in to continue.\")}\n          right={\n            isDetails ? (\n              <Button variant=\"outline\" shape=\"lg\" onClick={goBack}>\n                {t(\"loops.back\", \"Back\")}\n              </Button>\n            ) : null\n          }\n        />\n        <CardText>\n          {t(\"loops.signInBody\", \"Please sign in to view your loops.\")}\n        </CardText>\n      </div>\n    );\n  }\n\n  return isDetails ? (\n    <LoopDetailsView userId={userId} loopId={loopId!} onBack={goBack} />\n  ) : (\n    <LoopsListView userId={userId} onOpenLoop={openLoop} />\n  );\n}\n"],"names":["updateURLParams","navigate","location","updates","options","replace","sp","URLSearchParams","search","key","value","Object","entries","set","String","delete","nextSearch","toString","pathname","toMsg","e","Error","message","rtkError","error","makeTimestamps","iso","Date","toISOString","server","serverTimestamp","normalizeUrl","input","v","trim","test","loopMatchesApi","baseApi","injectEndpoints","endpoints","builder","getAllMatches","query","queryFn","_arg","api","uid","requireUidFromState","getState","q","userLoopMatchesCol","orderBy","data","getDocs","docs","map","d","id","providesTags","res","m","type","getMatchesByLoop","loopId","where","_res","_err","arg","getMatch","matchId","snap","getDoc","userLoopMatchDoc","exists","createMatch","mutation","payload","url","createdAt","updatedAt","createdAtTs","updatedAtTs","addDoc","invalidatesTags","_r","_e","updateMatchStatus","status","updateDoc","undefined","updateMatch","patch","cleaned","out","cleanPatch","deleteMatch","deleteDoc","useGetAllMatchesQuery","useGetMatchesByLoopQuery","useGetMatchQuery","useCreateMatchMutation","useUpdateMatchStatusMutation","useUpdateMatchMutation","useDeleteMatchMutation","Header","title","subtitle","right","_jsxs","className","children","_jsx","CardText","isRecord","asString","fallback","asNumber","n","Number","isFinite","pickFrom","allowed","includes","joinTitles","titles","t","filter","Boolean","join","HOST_RULES","needle","platform","platformValues","LOOP_PLATFORMS","p","statusValues","LOOP_MATCH_STATUSES","s","AddMatchModal","open","onOpenChange","defaultPlatform","useTranslation","st","schema","useMemo","Yup","min","defaultValue","required","company","oneOf","URL","tryParseUrl","description","matchedAt","makeSchema","initial","disabled","isLoading","Modal","Formik","initialValues","enableReinitialize","validationSchema","onSubmit","async","values","helpers","setStatus","unwrap","getErrorMessage","f","commonError","isError","canSubmit","dirty","handleSubmit","InlineError","FormField","label","touched","errors","describedBy","invalid","Input","name","onChange","handleChange","onBlur","handleBlur","placeholder","state","hint","next","target","setFieldValue","detected","host","toLowerCase","rule","detectPlatformFromUrl","TextArea","Button","variant","shadow","shape","onClick","uniquePlatforms","list","Set","add","Array","from","EditSourcesModal","onSave","selected","setSelected","useState","isSaving","setIsSaving","useEffect","selectedSet","totalSelected","length","canSave","size","setPresetRecommended","RECOMMENDED_PLATFORMS","setPresetAll","ALL_PLATFORMS","GROUPS","g","groupPlatforms","platformsByGroup","countSelected","has","isAll","groupId","prev","every","toggleGroup","sort","a","b","la","PLATFORM_LABEL_BY_ID","lb","localeCompare","checked","toggle","RADIUS_OPTIONS","POSTED_WITHIN_OPTIONS","parseKeywordLine","CompactFilters","onApply","onReset","advancedOpen","setAdvancedOpen","workModeOptions","seniorityOptions","employmentOptions","languageOptions","badges","role","push","radiusKm","workMode","postedWithin","r","o","seniority","employmentType","includeKeywords","excludeKeywords","language","excludeAgencies","LoopSettingsModal","PlatformLinkCard","isActive","onOpen","onAdd","addDisabled","filtersEqual","keys","DEFAULT_CANONICAL_FILTERS","k","isNonEmptyString","x","getSafeFilterString","getSafeFilterNumber","LoopSearchLinks","loop","userId","page","onPageChange","updateLoop","updateState","useUpdateLoopMutation","isSourcesModalOpen","setIsSourcesModalOpen","isSettingsOpen","setIsSettingsOpen","isAddMatchModalOpen","setIsAddMatchModalOpen","setDefaultPlatform","loopForState","platforms","remoteMode","filters","draftFilters","setDraftFilters","applyDraftFilters","resetFilters","appliedFilters","activeLink","setActive","links","baseFromLoop","src","maybeFilters","buildCanonicalFiltersFromLoop","_setDraftFilters","setAppliedFilters","setActiveLink","isDirty","setIsDirty","useCallback","buildUrlByPlatform","buildSearchLinks","split","word","startsWith","useLoopSearchLinksState","canEditSources","pageSize","totalPages","Math","max","ceil","safePage","clampPage","offset","info","to","pagedLinks","slice","appliedBadges","getSafeFilterWorkMode","openAddModal","normalizeRoleToTitles","err","console","total","nextPlatforms","link","handleOpenLink","window","openUrl","Pagination","LoopDetailsView","onBack","useNavigate","useLocation","dispatch","useAppDispatch","savedDetailsPage","useAppSelector","loopsUi","detailsPageByLoopId","urlPage","raw","get","NaN","i","trunc","readPageFromSearch","detailsPage","setLoopDetailsPage","setLastLoopsUrl","loopQ","useGetLoopQuery","roles","remoteText","content","writePageToSearch","LoopsListView","onOpenLoop","savedListPage","listPage","createOpen","setCreateOpen","readPageParam","cursorByPageRef","useRef","cursorId","setCursorId","fetchLoopsPage","useLazyGetLoopsPageQuery","syncCursorForPage","targetPage","current","cache","cur","nextCursor","cancelled","run","catch","loopsPageQ","useGetLoopsPageQuery","skipToken","items","nextPage","clamped","setLoopsListPage","goToPage","showFrom","showTo","l","titlesText","tabIndex","onKeyDown","preventDefault","isFetching","siblingCount","PageHeader","CreateLoopModal","onCreated","LoopsPage","useAuthSelectors","useParams","isDetails","goBack"],"ignoreList":[],"sourceRoot":""}