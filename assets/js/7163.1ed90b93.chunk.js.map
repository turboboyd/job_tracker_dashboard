{"version":3,"file":"assets/js/7163.1ed90b93.chunk.js","mappings":"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","sources":["webpack://job-tracker-dashboard/./src/shared/lib/url/updateURLParams.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/components/EditMatchModal.tsx","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/filters.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/components/MatchesFilters.tsx","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesDerived.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesPage.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesPageController.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesQueries.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/model/useMatchesMutations.ts","webpack://job-tracker-dashboard/./src/pages/MatchesPage/MatchesPage.tsx"],"sourcesContent":["import type { Location, NavigateFunction } from \"react-router-dom\";\n\ntype Updates = Record<string, string | number | boolean | null | undefined>;\n\ntype Options = {\n  replace?: boolean;\n};\n\n/**\n * Small helper for manipulating query params without manually building strings.\n *\n * Rules:\n * - null/undefined/false => remove param\n * - true => set \"1\"\n * - number/string => set as string\n */\nexport function updateURLParams(\n  navigate: NavigateFunction,\n  location: Location,\n  updates: Updates,\n  options: Options = { replace: true }\n) {\n  const sp = new URLSearchParams(location.search);\n\n  for (const [key, value] of Object.entries(updates)) {\n    if (value === null || value === undefined || value === false) {\n      sp.delete(key);\n      continue;\n    }\n\n    if (value === true) {\n      sp.set(key, \"1\");\n      continue;\n    }\n\n    sp.set(key, String(value));\n  }\n\n  const nextSearch = sp.toString();\n  navigate(\n    {\n      pathname: location.pathname,\n      search: nextSearch ? `?${nextSearch}` : \"\",\n    },\n    { replace: options.replace ?? true }\n  );\n}\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { Button, Modal, InputField, TextAreaField } from \"src/shared/ui\";\n\ntype MatchLike = {\n  id: string;\n  title: string;\n  company: string;\n  location: string;\n  url: string;\n  matchedAt?: string | null;\n  description?: string | null;\n};\n\nfunction toDateInputValue(iso?: string | null): string {\n  if (!iso) return \"\";\n  const d = new Date(iso);\n  if (Number.isNaN(d.getTime())) return \"\";\n  const yyyy = String(d.getFullYear());\n  const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n  const dd = String(d.getDate()).padStart(2, \"0\");\n  return `${yyyy}-${mm}-${dd}`;\n}\n\nfunction toIsoFromDateInput(v: string): string {\n  return new Date(v).toISOString();\n}\n\nexport function EditMatchModal({\n  open,\n  busy,\n  match,\n  loopName,\n  onClose,\n  onSave,\n}: {\n  open: boolean;\n  busy: boolean;\n  match: MatchLike | null;\n  loopName: string;\n  onClose: () => void;\n  onSave: (matchId: string, patch: Record<string, unknown>) => Promise<void>;\n}) {\n  const { t } = useTranslation();\n  const [localBusy, setLocalBusy] = useState(false);\n\n  const [title, setTitle] = useState(\"\");\n  const [company, setCompany] = useState(\"\");\n  const [location, setLocation] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n  const [matchedAt, setMatchedAt] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n\n  const disabled = busy || localBusy;\n\n  useEffect(() => {\n    if (!open || !match) return;\n    setTitle(match.title ?? \"\");\n    setCompany(match.company ?? \"\");\n    setLocation(match.location ?? \"\");\n    setUrl(match.url ?? \"\");\n    setMatchedAt(toDateInputValue(match.matchedAt ?? null));\n    setDescription(String(match.description ?? \"\"));\n  }, [open, match]);\n\n  const patch = useMemo(() => {\n    const p: Record<string, unknown> = {\n      title: title.trim(),\n      company: company.trim(),\n      location: location.trim(),\n      url: url.trim(),\n      description: description.trim(),\n    };\n\n    if (matchedAt) p.matchedAt = toIsoFromDateInput(matchedAt);\n\n    return p;\n  }, [title, company, location, url, description, matchedAt]);\n\n  const save = async () => {\n    if (!match) return;\n    try {\n      setLocalBusy(true);\n      await onSave(match.id, patch);\n      onClose();\n    } finally {\n      setLocalBusy(false);\n    }\n  };\n\n  if (!match) return null;\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={(v) => {\n        if (!v) onClose();\n      }}\n      title={t(\"matches.modal.editTitle\")}\n      description={loopName ? t(\"matches.modal.loop\", { name: loopName }) : undefined}\n      size=\"lg\"\n      showClose={false}\n    >\n      <div className=\"flex flex-col gap-lg\">\n        <div className=\"grid grid-cols-1 gap-md md:grid-cols-2\">\n          <div className=\"md:col-span-2\">\n            <InputField\n              label={t(\"matches.modal.fields.title\")}\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              disabled={disabled}\n            />\n          </div>\n\n          <InputField\n            label={t(\"matches.modal.fields.company\")}\n            value={company}\n            onChange={(e) => setCompany(e.target.value)}\n            disabled={disabled}\n          />\n\n          <InputField\n            label={t(\"matches.modal.fields.location\")}\n            value={location}\n            onChange={(e) => setLocation(e.target.value)}\n            disabled={disabled}\n          />\n\n          <InputField\n            label={t(\"matches.modal.fields.url\")}\n            value={url}\n            onChange={(e) => setUrl(e.target.value)}\n            disabled={disabled}\n          />\n\n          <InputField\n            label={t(\"matches.modal.fields.matchedAt\")}\n            type=\"date\"\n            value={matchedAt}\n            onChange={(e) => setMatchedAt(e.target.value)}\n            disabled={disabled}\n          />\n\n          <div className=\"md:col-span-2\">\n            <TextAreaField\n              label={t(\"matches.modal.fields.description\")}\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              disabled={disabled}\n              rows={6}\n            />\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-end gap-sm border-t border-border pt-md\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            shape=\"pill\"\n            shadow=\"sm\"\n            disabled={disabled}\n            onClick={onClose}\n          >\n            {t(\"matches.common.cancel\")}\n          </Button>\n\n          <Button\n            variant=\"default\"\n            size=\"sm\"\n            shape=\"pill\"\n            shadow=\"sm\"\n            disabled={disabled}\n            onClick={save}\n          >\n            {t(\"matches.common.save\")}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import type { LoopMatch, LoopMatchStatus } from \"src/entities/loopMatch\";\n\nexport type TypeMatch = LoopMatch;\n\nexport type MatchesSort = \"matchedAtDesc\" | \"matchedAtAsc\" | \"titleAsc\" | \"companyAsc\";\n\nexport type MatchesFiltersState = {\n  q: string;\n  sort: MatchesSort;\n  loopIds: string[];\n  platforms: string[];\n  statuses: LoopMatchStatus[];\n};\n\nexport const matchesFiltersDefaults: MatchesFiltersState = {\n  q: \"\",\n  sort: \"matchedAtDesc\",\n  loopIds: [],\n  platforms: [],\n  statuses: [],\n};\n\nexport type MatchesFilterChip =\n  | { key: \"q\"; kind: \"q\"; q: string; patch: Partial<MatchesFiltersState> }\n  | { key: \"sort\"; kind: \"sort\"; sort: MatchesSort; patch: Partial<MatchesFiltersState> }\n  | {\n      key: \"loops\";\n      kind: \"loops\";\n      loopNames: string[];\n      patch: Partial<MatchesFiltersState>;\n    }\n  | {\n      key: \"platforms\";\n      kind: \"platforms\";\n      platforms: string[];\n      patch: Partial<MatchesFiltersState>;\n    }\n  | {\n      key: \"statuses\";\n      kind: \"statuses\";\n      statuses: LoopMatchStatus[];\n      patch: Partial<MatchesFiltersState>;\n    };\n\nfunction includesCI(hay: string, needle: string) {\n  return hay.toLowerCase().includes(needle.toLowerCase());\n}\n\nfunction compareIso(a: string, b: string) {\n  if (a === b) return 0;\n  return a < b ? -1 : 1;\n}\n\nexport function selectVisibleMatches(matches: TypeMatch[], filters: MatchesFiltersState) {\n  const q = filters.q.trim();\n  const hasQ = q.length > 0;\n\n  const loopIdsSet = new Set(filters.loopIds);\n  const platformsSet = new Set(filters.platforms.map((p) => p.toLowerCase()));\n  const statusesSet = new Set(filters.statuses);\n\n  const filtered = matches.filter((m) => {\n    if (filters.loopIds.length && !loopIdsSet.has(m.loopId)) return false;\n\n    if (filters.platforms.length) {\n      const p = String(m.platform ?? \"\").toLowerCase();\n      if (!platformsSet.has(p)) return false;\n    }\n\n    if (filters.statuses.length && !statusesSet.has(m.status)) return false;\n\n    if (hasQ) {\n      const parts = [m.title, m.company, m.location, m.url, m.description]\n        .map((x) => String(x ?? \"\"))\n        .join(\" \");\n      if (!includesCI(parts, q)) return false;\n    }\n\n    return true;\n  });\n\n  const sorted = [...filtered].sort((a, b) => {\n    switch (filters.sort) {\n      case \"matchedAtAsc\":\n        return compareIso(a.matchedAt, b.matchedAt);\n      case \"matchedAtDesc\":\n        return compareIso(b.matchedAt, a.matchedAt);\n      case \"titleAsc\":\n        return String(a.title ?? \"\").localeCompare(String(b.title ?? \"\"), undefined, {\n          sensitivity: \"base\",\n        });\n      case \"companyAsc\":\n        return String(a.company ?? \"\").localeCompare(String(b.company ?? \"\"), undefined, {\n          sensitivity: \"base\",\n        });\n      default:\n        return 0;\n    }\n  });\n\n  return sorted;\n}\n\nexport function deriveMatchesFilterChips(args: {\n  filters: MatchesFiltersState;\n  loopOptions: Array<{ id: string; name: string }>;\n}) {\n  const { filters, loopOptions } = args;\n\n  const chips: MatchesFilterChip[] = [];\n\n  if (filters.q.trim()) {\n    chips.push({ key: \"q\", kind: \"q\", q: filters.q.trim(), patch: { q: \"\" } });\n  }\n\n  if (filters.sort !== matchesFiltersDefaults.sort) {\n    chips.push({\n      key: \"sort\",\n      kind: \"sort\",\n      sort: filters.sort,\n      patch: { sort: matchesFiltersDefaults.sort },\n    });\n  }\n\n  if (filters.loopIds.length) {\n    const nameById = new Map(loopOptions.map((l) => [l.id, l.name]));\n    const loopNames = filters.loopIds.map((id) => nameById.get(id) ?? id);\n    chips.push({ key: \"loops\", kind: \"loops\", loopNames, patch: { loopIds: [] } });\n  }\n\n  if (filters.platforms.length) {\n    chips.push({\n      key: \"platforms\",\n      kind: \"platforms\",\n      platforms: filters.platforms,\n      patch: { platforms: [] },\n    });\n  }\n\n  if (filters.statuses.length) {\n    chips.push({\n      key: \"statuses\",\n      kind: \"statuses\",\n      statuses: filters.statuses,\n      patch: { statuses: [] },\n    });\n  }\n\n  return chips;\n}\n","import type { TFunction } from \"i18next\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport type { LoopMatchStatus } from \"src/entities/loopMatch\";\nimport { classNames } from \"src/shared/lib\";\nimport {\n  Button,\n  Card,\n  DebouncedInputField,\n  SelectField,\n  MultiSelectDropdown,\n  Pagination,\n} from \"src/shared/ui\";\n\nimport { matchesFiltersDefaults } from \"../model/filters\";\nimport type { MatchesFiltersState, MatchesSort } from \"../model/filters\";\n\n\nfunction Chip({\n  children,\n  onRemove,\n  removeLabel,\n}: {\n  children: React.ReactNode;\n  onRemove: () => void;\n  removeLabel: string;\n}) {\n  return (\n    <span className=\"inline-flex items-center gap-2 rounded-full border border-border bg-background px-3 py-1 text-xs text-foreground shadow-sm\">\n      <span className=\"truncate max-w-[220px]\">{children}</span>\n\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        shape=\"pill\"\n        shadow=\"none\"\n        onClick={onRemove}\n        aria-label={removeLabel}\n        className={classNames(\n          \"h-6 w-6 p-0\",\n          \"text-muted-foreground hover:text-foreground\",\n          \"focus-visible:ring-2 focus-visible:ring-ring\"\n        )}\n      >\n        âœ•\n      </Button>\n    </span>\n  );\n}\n\nfunction labelSort(t: TFunction, v: MatchesSort) {\n  switch (v) {\n    case \"matchedAtDesc\":\n      return t(\"matches.filters.sort.options.matchedAtDesc\");\n    case \"matchedAtAsc\":\n      return t(\"matches.filters.sort.options.matchedAtAsc\");\n    case \"titleAsc\":\n      return t(\"matches.filters.sort.options.titleAsc\");\n    case \"companyAsc\":\n      return t(\"matches.filters.sort.options.companyAsc\");\n    default:\n      return String(v);\n  }\n}\n\nfunction labelStatus(t: TFunction, v: LoopMatchStatus) {\n  return t(`matches.status.${v}`);\n}\n\nfunction buildChips(args: {\n  t: TFunction;\n  filters: MatchesFiltersState;\n  loopOptions: Array<{ id: string; name: string }>;\n}): Array<{ key: string; label: string; patch: Partial<MatchesFiltersState> }> {\n  const { t, filters, loopOptions } = args;\n  const chips: Array<{ key: string; label: string; patch: Partial<MatchesFiltersState> }> = [];\n\n  if (filters.q.trim()) {\n    chips.push({\n      key: \"q\",\n      label: t(\"matches.filters.chips.search\", { q: filters.q.trim() }),\n      patch: { q: \"\" },\n    });\n  }\n\n  if (filters.sort !== matchesFiltersDefaults.sort) {\n    chips.push({\n      key: \"sort\",\n      label: t(\"matches.filters.chips.sort\", { value: labelSort(t, filters.sort) }),\n      patch: { sort: matchesFiltersDefaults.sort },\n    });\n  }\n\n  if (filters.loopIds.length) {\n    const nameById = new Map(loopOptions.map((l) => [l.id, l.name]));\n    const names = filters.loopIds.map((id) => nameById.get(id) ?? id).join(\", \");\n    chips.push({\n      key: \"loops\",\n      label: t(\"matches.filters.chips.loops\", { value: names }),\n      patch: { loopIds: [] },\n    });\n  }\n\n  if (filters.platforms.length) {\n    const names = filters.platforms.map((p) => p.toUpperCase()).join(\", \");\n    chips.push({\n      key: \"platforms\",\n      label: t(\"matches.filters.chips.platforms\", { value: names }),\n      patch: { platforms: [] },\n    });\n  }\n\n  if (filters.statuses.length) {\n    const names = filters.statuses.map((s) => labelStatus(t, s)).join(\", \");\n    chips.push({\n      key: \"statuses\",\n      label: t(\"matches.filters.chips.statuses\", { value: names }),\n      patch: { statuses: [] },\n    });\n  }\n\n  return chips;\n}\n\nexport function MatchesFilters({\n  value,\n  onChange,\n  onReset,\n\n  loopOptions,\n  platformOptions,\n  statusOptions,\n\n  totalCount,\n  filteredCount,\n  loopsLoading,\n\n  page,\n  totalPages,\n  onPageChange,\n  pageFrom,\n  pageTo,\n  pageDisabled,\n}: {\n  value: MatchesFiltersState;\n  onChange: (next: MatchesFiltersState) => void;\n  onReset: () => void;\n\n  loopOptions: Array<{ id: string; name: string }>;\n  platformOptions: string[];\n  statusOptions: LoopMatchStatus[];\n\n  totalCount: number;\n  filteredCount: number;\n  loopsLoading: boolean;\n\n  page: number;\n  totalPages: number;\n  onPageChange: (next: number | ((prev: number) => number)) => void;\n  pageFrom: number;\n  pageTo: number;\n  pageDisabled: boolean;\n}) {\n  const { t } = useTranslation();\n\n  const set = (patch: Partial<MatchesFiltersState>) =>\n    onChange({ ...value, ...patch });\n\n  const chips = React.useMemo(() => {\n    return buildChips({ t, filters: value, loopOptions });\n  }, [t, value, loopOptions]);\n\n  const isDefault = chips.length === 0;\n\n  return (\n    <Card\n      variant=\"default\"\n      padding=\"sm\"\n      shadow=\"sm\"\n      className=\"space-y-md overflow-visible\"\n    >\n      <div className=\"flex flex-wrap items-center justify-between gap-md\">\n        <div className=\"flex flex-wrap items-center gap-sm\">\n          <div className=\"text-sm text-muted-foreground\">\n            {t(\"matches.filters.showing\", { filtered: filteredCount, total: totalCount })}\n          </div>\n\n          {chips.length ? (\n            <>\n              {chips.map((c) => (\n                <Chip\n                  key={c.key}\n                  onRemove={() => set(c.patch)}\n                  removeLabel={t(\"matches.filters.common.removeFilter\")}\n                >\n                  {c.label}\n                </Chip>\n              ))}\n\n              <Button\n                variant=\"link\"\n                size=\"sm\"\n                shape=\"pill\"\n                shadow=\"none\"\n                onClick={onReset}\n                className={classNames(\n                  \"ml-1 h-auto px-0 py-0\",\n                  \"text-xs text-muted-foreground\",\n                  \"underline underline-offset-2\",\n                  \"hover:text-foreground\"\n                )}\n              >\n                {t(\"matches.filters.clearAll\")}\n              </Button>\n            </>\n          ) : null}\n        </div>\n\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          shape=\"pill\"\n          shadow=\"sm\"\n          disabled={isDefault}\n          onClick={onReset}\n        >\n          {t(\"matches.filters.reset\")}\n        </Button>\n      </div>\n\n      {/* ONE ROW ON lg, WRAP ON SMALLER */}\n      <div className=\"grid grid-cols-1 gap-md md:grid-cols-12\">\n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <DebouncedInputField\n            label={t(\"matches.filters.search.label\")}\n            value={value.q}\n            onValueChange={(q) => set({ q })}\n            delay={250}\n            preset=\"search\"\n            inputSize=\"sm\"\n            autoComplete=\"off\"\n          />\n        </div>\n\n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <SelectField\n            label={t(\"matches.filters.sort.label\")}\n            value={value.sort}\n            onChange={(sort) => set({ sort })}\n            size=\"sm\"\n            options={[\n              { value: \"matchedAtDesc\", label: t(\"matches.filters.sort.options.matchedAtDesc\") },\n              { value: \"matchedAtAsc\", label: t(\"matches.filters.sort.options.matchedAtAsc\") },\n              { value: \"titleAsc\", label: t(\"matches.filters.sort.options.titleAsc\") },\n              { value: \"companyAsc\", label: t(\"matches.filters.sort.options.companyAsc\") },\n            ]}\n          />\n        </div>\n          \n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <MultiSelectDropdown\n            label={t(\"matches.filters.loops.label\")}\n            value={value.loopIds}\n            onChange={(loopIds) => set({ loopIds })}\n            options={loopOptions.map((l) => ({ value: l.id, label: l.name }))}\n            placeholder={loopsLoading ? t(\"matches.filters.loops.loading\") : t(\"matches.filters.loops.all\")}\n            clearLabel={t(\"matches.filters.common.clear\")}\n            searchable\n            disabled={loopsLoading}\n          />\n        </div>\n\n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <MultiSelectDropdown\n            label={t(\"matches.filters.platforms.label\")}\n            value={value.platforms}\n            onChange={(platforms) => set({ platforms })}\n            options={platformOptions.map((p) => ({\n              value: p,\n              label: p.toUpperCase(),\n            }))}\n            placeholder={t(\"matches.filters.platforms.all\")}\n            clearLabel={t(\"matches.filters.common.clear\")}\n            searchable\n          />\n        </div>\n\n        <div className=\"md:col-span-6 lg:col-span-2\">\n          <MultiSelectDropdown\n            label={t(\"matches.filters.statuses.label\")}\n            value={value.statuses}\n            onChange={(statuses) => set({ statuses })}\n            options={statusOptions.map((s) => ({ value: s, label: labelStatus(t, s) }))}\n            placeholder={t(\"matches.filters.statuses.all\")}\n            clearLabel={t(\"matches.filters.common.clear\")}\n          />\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 items-center gap-md md:grid-cols-12\">\n        <div className=\"md:col-span-4 text-xs text-muted-foreground\">\n          {t(\"matches.filters.pageShowing\", { from: pageFrom, to: pageTo, total: filteredCount })}\n        </div>\n\n        <div className=\"md:col-span-8 flex justify-start md:justify-end\">\n          <Pagination\n            page={page}\n            totalPages={totalPages}\n            onPageChange={onPageChange}\n            disabled={pageDisabled}\n            siblingCount={1}\n          />\n        </div>\n      </div>\n    </Card>\n  );\n}\n","import React from \"react\";\n\nimport type { LoopMatchStatus } from \"src/entities/loopMatch\";\n\nfunction cmpStr(a: string, b: string) {\n  return a.localeCompare(b, undefined, { sensitivity: \"base\" });\n}\n\nfunction normalizeToken(v: unknown): string {\n  return String(v ?? \"\")\n    .toLowerCase()\n    .trim();\n}\n\ntype MatchLike = {\n  platform?: unknown;\n  status?: unknown;\n  loopId: string;\n};\n\ntype LoopLike = {\n  id: string;\n  name: string;\n};\n\nexport function useMatchesDerived(matches: MatchLike[], loops: LoopLike[]) {\n  const loopIdToName = React.useMemo(() => {\n    const map = new Map<string, string>();\n    for (const l of loops) map.set(l.id, l.name);\n    return map;\n  }, [loops]);\n\n  const platformOptions = React.useMemo(() => {\n    const set = new Set<string>();\n    for (const m of matches) {\n      const token = normalizeToken(m.platform);\n      if (token) set.add(token);\n    }\n    return Array.from(set).sort(cmpStr);\n  }, [matches]);\n\n  const statusOptions = React.useMemo(() => {\n    const set = new Set<string>();\n    for (const m of matches) {\n      const token = String(m.status ?? \"\").trim();\n      if (token) set.add(token);\n    }\n    return Array.from(set).sort(cmpStr) as LoopMatchStatus[];\n  }, [matches]);\n\n  return { loopIdToName, platformOptions, statusOptions };\n}\n","import React from \"react\";\nimport type { Location, NavigateFunction } from \"react-router-dom\";\n\nimport { updateURLParams } from \"src/shared/lib/url/updateURLParams\";\n\nimport type { MatchesFiltersState, TypeMatch } from \"./filters\";\nimport { matchesFiltersDefaults, selectVisibleMatches } from \"./filters\";\n\n\nconst CSV_SEP = \",\";\n\nfunction readCsv(sp: URLSearchParams, key: string): string[] {\n  const raw = sp.get(key);\n  if (!raw) return [];\n  return raw\n    .split(CSV_SEP)\n    .map((s) => s.trim())\n    .filter(Boolean);\n}\n\nfunction writeCsv(values: string[]): string | null {\n  const v = values.map((s) => String(s).trim()).filter(Boolean);\n  return v.length ? v.join(CSV_SEP) : null;\n}\n\nexport function readMatchesStateFromSearch(search: string): {\n  filters: MatchesFiltersState;\n  page: number;\n} {\n  const sp = new URLSearchParams(search);\n\n  const q = sp.get(\"q\") ?? matchesFiltersDefaults.q;\n  const sort = (sp.get(\"sort\") as MatchesFiltersState[\"sort\"]) ?? matchesFiltersDefaults.sort;\n  const loopIds = readCsv(sp, \"loop\");\n  const platforms = readCsv(sp, \"platform\");\n  const statuses = readCsv(sp, \"status\") as MatchesFiltersState[\"statuses\"];\n\n  const pageRaw = sp.get(\"page\");\n  const page = Math.max(1, Number(pageRaw ?? 1) || 1);\n\n  return {\n    filters: {\n      q,\n      sort,\n      loopIds,\n      platforms,\n      statuses,\n    },\n    page,\n  };\n}\n\nexport function writeMatchesStateToUrl(args: {\n  navigate: NavigateFunction;\n  location: Location;\n  filters: MatchesFiltersState;\n  page: number;\n  replace?: boolean;\n}) {\n  const { navigate, location, filters, page, replace = true } = args;\n\n  updateURLParams(\n    navigate,\n    location,\n    {\n      q: filters.q.trim() || null,\n      sort: filters.sort !== matchesFiltersDefaults.sort ? filters.sort : null,\n\n      loop: writeCsv(filters.loopIds),\n      platform: writeCsv(filters.platforms),\n      status: writeCsv(filters.statuses),\n\n      page: page > 1 ? page : null,\n    },\n    { replace },\n  );\n}\n\nexport function useMatchesPage(args: {\n  matches: TypeMatch[];\n  /** Route location.search */\n  search: string;\n  navigate: NavigateFunction;\n  location: Location;\n}) {\n  const { matches, search, navigate, location } = args;\n\n  const initial = React.useMemo(() => readMatchesStateFromSearch(search), [search]);\n\n  const [filters, setFiltersState] = React.useState<MatchesFiltersState>(initial.filters);\n\n  // Keep URL -> state in sync on first render only. We intentionally do not\n  // react to URL edits after mount to avoid complex bidirectional sync.\n  const didInitRef = React.useRef(false);\n  React.useEffect(() => {\n    if (didInitRef.current) return;\n    didInitRef.current = true;\n    setFiltersState(initial.filters);\n  }, [initial.filters]);\n\n  const visible = React.useMemo(() => {\n    return selectVisibleMatches(matches, filters);\n  }, [matches, filters]);\n\n  const setFilters = React.useCallback(\n    (next: MatchesFiltersState) => {\n      setFiltersState(next);\n      // Any filter change should reset pagination to page 1 in URL.\n      writeMatchesStateToUrl({ navigate, location, filters: next, page: 1, replace: true });\n    },\n    [navigate, location],\n  );\n\n  const reset = React.useCallback(() => {\n    setFiltersState(matchesFiltersDefaults);\n    writeMatchesStateToUrl({ navigate, location, filters: matchesFiltersDefaults, page: 1, replace: true });\n  }, [navigate, location]);\n\n  return { filters, setFilters, reset, visible, initialPage: initial.page };\n}\n","import React from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\n\nimport { useAuthSelectors } from \"src/entities/auth\";\nimport type { UpdateMatchInput, LoopMatchStatus } from \"src/entities/loopMatch\";\nimport { usePagination } from \"src/shared/lib/pagination/usePagination\";\n\nimport { matchesFiltersDefaults } from \"./filters\";\nimport { useMatchesDerived } from \"./useMatchesDerived\";\nimport { useMatchesMutations } from \"./useMatchesMutations\";\nimport { useMatchesPage, writeMatchesStateToUrl } from \"./useMatchesPage\";\nimport { useMatchesQueries } from \"./useMatchesQueries\";\n\nfunction stableFiltersKey(filters: unknown): string {\n  const seen = new WeakSet<object>();\n\n  const sortDeep = (val: unknown): unknown => {\n    if (val === null || typeof val !== \"object\") return val;\n\n    if (val instanceof Date) return val.toISOString();\n\n    if (Array.isArray(val)) {\n      return val.map(sortDeep);\n    }\n\n    if (seen.has(val as object)) return \"[Circular]\";\n    seen.add(val as object);\n\n    const obj = val as Record<string, unknown>;\n    const keys = Object.keys(obj).sort((a, b) =>\n      a.localeCompare(b, undefined, { sensitivity: \"base\" }),\n    );\n\n    const out: Record<string, unknown> = {};\n    for (const k of keys) out[k] = sortDeep(obj[k]);\n    return out;\n  };\n\n  try {\n    return JSON.stringify(sortDeep(filters));\n  } catch {\n    return String(filters);\n  }\n}\n\nexport function useMatchesPageController() {\n  const { userId } = useAuthSelectors();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const { matchesQ, loopsQ, matches, loops } = useMatchesQueries();\n  const { busy, actions } = useMatchesMutations();\n\n  const { filters, setFilters, reset, visible, initialPage } = useMatchesPage({\n    matches,\n    search: location.search,\n    navigate,\n    location,\n  });\n\n  const [editingId, setEditingId] = React.useState<string | null>(null);\n\n  const { loopIdToName, platformOptions, statusOptions } = useMatchesDerived(\n    matches,\n    loops,\n  );\n\n  const filtersKey = React.useMemo(() => stableFiltersKey(filters), [filters]);\n\n  const resetKey = React.useMemo(() => {\n    return [\n      `userId:${userId ?? \"anon\"}`,\n      `filters:${filtersKey}`,\n      `total:${matches.length}`,\n      `visible:${visible.length}`,\n    ].join(\"|\");\n  }, [userId, filtersKey, matches.length, visible.length]);\n\n  const pagination = usePagination({\n    totalItems: visible.length,\n    pageSize: 6,\n    initialPage,\n    resetKey,\n  });\n\n  const setPage = React.useCallback(\n    (next: number | ((prev: number) => number)) => {\n      pagination.setPage(next);\n\n      const nextValue =\n        typeof next === \"function\" ? next(pagination.page) : next;\n      const safe = Math.max(1, Number(nextValue) || 1);\n      writeMatchesStateToUrl({\n        navigate,\n        location,\n        filters,\n        page: safe,\n        replace: true,\n      });\n    },\n    [pagination, navigate, location, filters],\n  );\n\n  const pagedMatches = React.useMemo(() => {\n    return visible.slice(\n      pagination.offset,\n      pagination.offset + pagination.limit,\n    );\n  }, [visible, pagination.offset, pagination.limit]);\n\n  const editingMatch = React.useMemo(() => {\n    if (!editingId) return null;\n    return matches.find((m) => m.id === editingId) ?? null;\n  }, [editingId, matches]);\n\n  const resetFilters = React.useCallback(\n    () => setFilters(matchesFiltersDefaults),\n    [setFilters],\n  );\n\n  const onReset = reset ?? resetFilters;\n\n  const onSaveEdit = React.useCallback(\n    async (matchId: string, patch: UpdateMatchInput[\"patch\"]) => {\n      await actions.onSaveEdit(matchId, patch);\n      setEditingId(null);\n    },\n    [actions],\n  );\n\n  return {\n    userId,\n    queries: { matchesQ, loopsQ },\n    busy,\n\n    matches,\n    loops,\n\n    loopIdToName,\n    platformOptions,\n    statusOptions,\n\n    filters,\n    setFilters,\n    onReset,\n\n    visible,\n    pagination: { ...pagination, setPage },\n    pagedMatches,\n\n    editingMatch,\n    setEditingId,\n\n    actions: {\n      onDelete: async (matchId: string) => {\n        const m = matches.find((x) => x.id === matchId);\n        if (!m) return;\n        await actions.onDelete(m.id, m.loopId);\n      },\n      onUpdateStatus: async (matchId: string, status: LoopMatchStatus) => {\n        const m = matches.find((x) => x.id === matchId);\n        if (!m) return;\n        await actions.onUpdateStatus(m.id, m.loopId, status);\n      },\n      onSaveEdit,\n    },\n  };\n}\n","import { useAuthSelectors } from \"src/entities/auth\";\nimport { useGetLoopsQuery } from \"src/entities/loop\";\nimport { useGetAllMatchesQuery } from \"src/entities/loopMatch\";\n\n\n\nexport function useMatchesQueries() {\n  const { isAuthReady, isAuthenticated } = useAuthSelectors();\n  const skip = !isAuthReady || !isAuthenticated;\n\n  const matchesQ = useGetAllMatchesQuery(undefined, { skip });\n  const loopsQ = useGetLoopsQuery(undefined, { skip });\n\n  const matches = matchesQ.data ?? [];\n  const loops = loopsQ.data ?? [];\n\n  return { matchesQ, loopsQ, matches, loops };\n}\n","import React from \"react\";\n\nimport { useAuthSelectors } from \"src/entities/auth\";\nimport {\n  useDeleteMatchMutation,\n  useUpdateMatchMutation,\n  useUpdateMatchStatusMutation,\n  type UpdateMatchInput,\n} from \"src/entities/loopMatch\";\nimport type { LoopMatchStatus } from \"src/entities/loopMatch\";\nimport { notify } from \"src/shared/lib\";\nimport { getErrorMessage } from \"src/shared/lib/errors\";\n\n/**\n * All match mutations.\n *\n * NOTE: we do NOT pass `userId` anymore.\n * Firestore ownership is derived from the document path: users/{uid}/loopMatches/...\n */\nexport function useMatchesMutations() {\n  const { isAuthReady, isAuthenticated } = useAuthSelectors();\n\n  const [updateStatus, updStatus] = useUpdateMatchStatusMutation();\n  const [updateMatch, updMatch] = useUpdateMatchMutation();\n  const [deleteMatch, del] = useDeleteMatchMutation();\n\n  const busy = updStatus.isLoading || updMatch.isLoading || del.isLoading;\n\n  const guardAuth = React.useCallback(() => {\n    if (!isAuthReady || !isAuthenticated) {\n      notify(\"error\", \"You are not signed in.\");\n      return false;\n    }\n    return true;\n  }, [isAuthReady, isAuthenticated]);\n\n  const onDelete = React.useCallback(\n    async (matchId: string, loopId: string) => {\n      if (!guardAuth()) return;\n\n      try {\n        await deleteMatch({ matchId, loopId }).unwrap();\n        notify(\"success\", \"Match deleted\");\n      } catch (err) {\n        notify(\"error\", `Failed to delete match: ${getErrorMessage(err)}`);\n      }\n    },\n    [deleteMatch, guardAuth],\n  );\n\n  const onUpdateStatus = React.useCallback(\n    async (matchId: string, loopId: string, status: LoopMatchStatus) => {\n      if (!guardAuth()) return;\n\n      try {\n        await updateStatus({ matchId, loopId, status }).unwrap();\n        notify(\"success\", \"Match updated\");\n      } catch (err) {\n        notify(\"error\", `Failed to update match: ${getErrorMessage(err)}`);\n      }\n    },\n    [guardAuth, updateStatus],\n  );\n\n  const onSaveEdit = React.useCallback(\n    async (matchId: string, patch: UpdateMatchInput[\"patch\"]) => {\n      if (!guardAuth()) throw new Error(\"Not signed in\");\n\n      try {\n        await updateMatch({ matchId, patch }).unwrap();\n        notify(\"success\", \"Match saved\");\n      } catch (err) {\n        notify(\"error\", `Failed to save match: ${getErrorMessage(err)}`);\n        throw err;\n      }\n    },\n    [guardAuth, updateMatch],\n  );\n\n  return { busy, actions: { onDelete, onUpdateStatus, onSaveEdit } };\n}\n","import { useTranslation } from \"react-i18next\";\n\nimport { MatchCard } from \"src/entities/loopMatch\";\nimport { getErrorMessage } from \"src/shared/lib\";\nimport { PageHeader, PageMessage } from \"src/shared/ui\";\n\nimport { EditMatchModal } from \"./components/EditMatchModal\";\nimport { MatchesFilters } from \"./components/MatchesFilters\";\nimport { useMatchesPageController } from \"./model/useMatchesPageController\";\n\nexport default function MatchesPage() {\n  const { t } = useTranslation();\n  const vm = useMatchesPageController();\n  const { matchesQ, loopsQ } = vm.queries;\n\n  if (matchesQ.isLoading) {\n    return (\n      <div className=\"w-full h-full flex flex-col min-h-0\">\n        <PageHeader title={t(\"matches.list.title\")} subtitle={t(\"matches.list.subtitle\")} />\n        <PageMessage>{t(\"matches.common.loading\")}</PageMessage>\n      </div>\n    );\n  }\n\n  if (matchesQ.isError) {\n    return (\n      <div className=\"w-full h-full flex flex-col min-h-0\">\n        <PageHeader title={t(\"matches.list.title\")} subtitle={t(\"matches.list.subtitle\")} />\n        <PageMessage>{getErrorMessage(matchesQ.error)}</PageMessage>\n      </div>\n    );\n  }\n\n  if (vm.matches.length === 0) {\n    return (\n      <div className=\"w-full h-full flex flex-col min-h-0\">\n        <PageHeader title={t(\"matches.list.title\")} subtitle={t(\"matches.list.subtitle\")} />\n        <PageMessage>{t(\"matches.list.empty\")}</PageMessage>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full h-full flex flex-col min-h-0\">\n      <PageHeader\n        title={t(\"matches.list.title\")}\n        subtitle={t(\"matches.list.subtitle\")}\n      />\n\n      <>\n        <MatchesFilters\n          value={vm.filters}\n          onChange={vm.setFilters}\n          onReset={vm.onReset}\n          loopOptions={vm.loops.map((l) => ({ id: l.id, name: l.name }))}\n          platformOptions={vm.platformOptions}\n          statusOptions={vm.statusOptions}\n          totalCount={vm.matches.length}\n          filteredCount={vm.visible.length}\n          loopsLoading={loopsQ.isLoading}\n          page={vm.pagination.page}\n          totalPages={vm.pagination.totalPages}\n          onPageChange={vm.pagination.setPage}\n          pageFrom={vm.pagination.info.from}\n          pageTo={vm.pagination.info.to}\n          pageDisabled={vm.busy || matchesQ.isFetching}\n        />\n\n        <div className=\"flex-1 min-h-0 overflow-auto pt-md\">\n          <div className=\"grid grid-cols-1 gap-md\">\n            {vm.pagedMatches.map((m) => (\n              <MatchCard\n                key={m.id}\n                match={m}\n                loopName={vm.loopIdToName.get(m.loopId) ?? \"\"}\n                busy={vm.busy}\n                onUpdateStatus={vm.actions.onUpdateStatus}\n                onDelete={vm.actions.onDelete}\n                onEdit={vm.setEditingId}\n              />\n            ))}\n          </div>\n        </div>\n\n        <EditMatchModal\n          open={Boolean(vm.editingMatch)}\n          busy={vm.busy}\n          loopName={vm.editingMatch ? (vm.loopIdToName.get(vm.editingMatch.loopId) ?? \"\") : \"\"}\n          match={vm.editingMatch}\n          onClose={() => vm.setEditingId(null)}\n          onSave={vm.actions.onSaveEdit}\n        />\n      </>\n    </div>\n  );\n}\n"],"names":["updateURLParams","navigate","location","updates","options","replace","sp","URLSearchParams","search","key","value","Object","entries","set","String","delete","nextSearch","toString","pathname","EditMatchModal","open","busy","match","loopName","onClose","onSave","t","useTranslation","localBusy","setLocalBusy","useState","title","setTitle","company","setCompany","setLocation","url","setUrl","matchedAt","setMatchedAt","description","setDescription","disabled","useEffect","iso","d","Date","Number","isNaN","getTime","getFullYear","getMonth","padStart","getDate","toDateInputValue","patch","useMemo","p","trim","toISOString","_jsx","Modal","onOpenChange","v","name","undefined","size","showClose","children","_jsxs","className","InputField","label","onChange","e","target","type","TextAreaField","rows","Button","variant","shape","shadow","onClick","async","id","matchesFiltersDefaults","q","sort","loopIds","platforms","statuses","compareIso","a","b","Chip","onRemove","removeLabel","classNames","labelSort","labelStatus","MatchesFilters","onReset","loopOptions","platformOptions","statusOptions","totalCount","filteredCount","loopsLoading","page","totalPages","onPageChange","pageFrom","pageTo","pageDisabled","chips","React","args","filters","push","length","nameById","Map","map","l","names","get","join","toUpperCase","s","buildChips","isDefault","Card","padding","filtered","total","_Fragment","c","DebouncedInputField","onValueChange","delay","preset","inputSize","autoComplete","SelectField","MultiSelectDropdown","placeholder","clearLabel","searchable","from","to","Pagination","siblingCount","cmpStr","localeCompare","sensitivity","normalizeToken","toLowerCase","readCsv","raw","split","filter","Boolean","writeCsv","values","writeMatchesStateToUrl","loop","platform","status","useMatchesPageController","userId","useAuthSelectors","useNavigate","useLocation","matchesQ","loopsQ","matches","loops","isAuthReady","isAuthenticated","skip","useGetAllMatchesQuery","useGetLoopsQuery","data","useMatchesQueries","actions","updateStatus","updStatus","useUpdateMatchStatusMutation","updateMatch","updMatch","useUpdateMatchMutation","deleteMatch","del","useDeleteMatchMutation","isLoading","guardAuth","notify","onDelete","matchId","loopId","unwrap","err","getErrorMessage","onUpdateStatus","onSaveEdit","Error","useMatchesMutations","setFilters","reset","visible","initialPage","initial","pageRaw","Math","max","readMatchesStateFromSearch","setFiltersState","didInitRef","current","hasQ","loopIdsSet","Set","platformsSet","statusesSet","m","has","parts","x","needle","includes","selectVisibleMatches","next","useMatchesPage","editingId","setEditingId","loopIdToName","token","add","Array","useMatchesDerived","filtersKey","seen","WeakSet","sortDeep","val","isArray","obj","keys","out","k","JSON","stringify","stableFiltersKey","resetKey","pagination","usePagination","totalItems","pageSize","setPage","nextValue","safe","pagedMatches","slice","offset","limit","editingMatch","find","resetFilters","queries","MatchesPage","vm","PageHeader","subtitle","PageMessage","isError","error","info","isFetching","MatchCard","onEdit"],"ignoreList":[],"sourceRoot":""}