"use strict";(self.webpackChunkjob_tracker_dashboard=self.webpackChunkjob_tracker_dashboard||[]).push([[8012],{9216(e,t,s){s.d(t,{e:()=>u});var r=s(29189),n=s(96540),o=s(22022),a=s(20410),i=s(73431),d=s(30537);const l="dashboard:loops-filter:v1";function c(e){if(e&&"function"==typeof e.toMillis)return e.toMillis();if("number"==typeof e)return e;if("string"==typeof e){const t=Date.parse(e);return Number.isFinite(t)?t:0}const t=e?.seconds;return"number"==typeof t?1e3*t:0}function u(){const{t:e}=(0,o.Bd)(void 0,{keyPrefix:"dashboard"}),{userId:t}=(0,a.gv)(),s=(0,i.fZ)(t?void 0:r.hT).data??[],[u,m]=(0,n.useState)(()=>function(e){try{if(!e)return{mode:"all"};const t=JSON.parse(e);if(!t||"object"!=typeof t)return{mode:"all"};const s=t;if("all"===s.mode)return{mode:"all"};if("selected"===s.mode&&Array.isArray(s.selectedLoopIds))return{mode:"selected",selectedLoopIds:s.selectedLoopIds.filter(e=>"string"==typeof e)}}catch{}return{mode:"all"}}("undefined"!=typeof window?window.localStorage.getItem(l):null));(0,n.useEffect)(()=>{try{window.localStorage.setItem(l,JSON.stringify(u))}catch{}},[u]);const f=(0,d.g5)(t?void 0:r.hT),p=(0,n.useMemo)(()=>f.data??[],[f.data]),x=f.isLoading,h=f.error?e("loadError","Failed to load matches"):null,b=(0,n.useMemo)(()=>{if("all"===u.mode)return p;const e=new Set(u.selectedLoopIds);return p.filter(t=>t.loopId&&e.has(t.loopId))},[p,u]),g=(0,n.useMemo)(()=>function(e){const t={};let s=0;for(const r of e)s+=1,t[r]=(t[r]??0)+1;return{total:s,byStatus:t}}(b.map(e=>{return"string"==typeof(t=e.status)&&t.trim().length>0?t.trim().toLowerCase():"unknown";var t})),[b]),v=g.total>0,j=(0,n.useMemo)(()=>{const e=b.map(e=>({id:e.id,title:e.title??null,company:e.company??null,status:e.status,createdAt:e.createdAt}));return e.sort((e,t)=>c(t.createdAt)-c(e.createdAt)),e.slice(0,5)},[b]),w=(0,n.useMemo)(()=>b.flatMap(e=>{const t=function(e){if("string"!=typeof e)return null;const t=e.trim().toLowerCase();return"new"===t||"saved"===t||"applied"===t||"interview"===t||"offer"===t||"rejected"===t?t:null}(e.status);return t?[{status:t,createdAt:e.createdAt,updatedAt:e.updatedAt,loopId:e.loopId}]:[]}),[b]),y=(0,n.useMemo)(()=>function(e,t){const s=e=>t[e]??0;return{total:e,new:s("new"),applied:s("applied"),saved:s("saved"),interview:s("interview"),offer:s("offer"),rejected:s("rejected")}}(g.total,g.byStatus),[g]);return{userId:t,loops:s,loopsFilter:u,setLoopsFilter:m,matches:b,matchesAll:p,chartMatches:w,isLoading:x,error:h,hasMatches:v,recentJobs:j,recent:j,pipelineSummary:y}}},60207(e,t,s){s.d(t,{Ev:()=>ee,$1:()=>g,Ze:()=>h,ny:()=>f,QK:()=>x,GZ:()=>u,fp:()=>ie,Se:()=>y,kW:()=>ne,zj:()=>q});var r=s(22022),n=s(68701),o=s(97234),a=s(96540),i=s(74848);const d={user:"ðŸ‘¤",question:"â“",loop:"ðŸ”",add:"âž•",total:"ðŸ”—",new:"ðŸ†•",applied:"ðŸ“„",saved:"ðŸ”„",interview:"âœ‰ï¸",offer:"ðŸŽ‰",rejected:"âš ï¸"},l={user:"text-foreground",question:"text-foreground",loop:"text-foreground",add:"text-foreground",total:"text-foreground",new:"text-slate-700 dark:text-slate-200",applied:"text-blue-600 dark:text-blue-400",saved:"text-amber-600 dark:text-amber-400",interview:"text-purple-600 dark:text-purple-400",offer:"text-emerald-600 dark:text-emerald-400",rejected:"text-red-600 dark:text-red-400"};function c({name:e,size:t=18,className:s,title:r}){return(0,i.jsx)("span",{"aria-hidden":!r||void 0,title:r,style:{fontSize:t},className:["leading-none",l[e],s??""].join(" ").trim(),children:d[e]})}function u({isLoading:e,error:t,summary:s,onGoJobs:a,onAddFirstJob:d}){const{t:l}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"});return e?(0,i.jsx)(o.Z,{padding:"md",className:"rounded-3xl",children:(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loadingâ€¦"})}):t?(0,i.jsxs)(o.Z,{padding:"md",className:"rounded-3xl",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-foreground",children:"Couldnâ€™t load jobs"}),(0,i.jsx)("div",{className:"mt-1 text-sm text-muted-foreground",children:t})]}):0===s.total?(0,i.jsxs)(o.Z,{padding:"md",className:"rounded-3xl",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("div",{className:"text-base font-semibold text-foreground",children:l("stats.empty.title","Add your first job")}),(0,i.jsx)("div",{className:"mt-1 text-sm text-muted-foreground",children:l("stats.empty.subtitle","Start tracking your applications â€” your statistics will appear here.")})]}),(0,i.jsx)(n.$n,{variant:"outline",shadow:"sm",onClick:d,children:l("stats.empty.cta","Add job")})]}),(0,i.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3 sm:grid-cols-5",children:[(0,i.jsx)(m,{label:l("status.new","New"),value:0}),(0,i.jsx)(m,{label:l("status.applied","Applied"),value:0}),(0,i.jsx)(m,{label:l("status.interview","Interview"),value:0}),(0,i.jsx)(m,{label:l("status.offer","Offer"),value:0}),(0,i.jsx)(m,{label:l("status.rejected","Rejected"),value:0})]})]}):(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("div",{className:"text-lg font-semibold text-foreground",children:l("stats.title","Statistics")}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:[(0,i.jsx)(n.rk,{onClick:()=>a?.("new"),children:(0,i.jsx)(n.nO,{title:l("status.new","New"),value:s.new,icon:(0,i.jsx)(c,{name:"new"})})}),(0,i.jsx)(n.rk,{onClick:()=>a?.("applied"),children:(0,i.jsx)(n.nO,{title:l("status.applied","Applied"),value:s.applied,icon:(0,i.jsx)(c,{name:"applied"})})}),(0,i.jsx)(n.rk,{onClick:()=>a?.("interview"),children:(0,i.jsx)(n.nO,{title:l("status.interview","Interview"),value:s.interview,icon:(0,i.jsx)(c,{name:"interview"})})}),(0,i.jsx)(n.rk,{onClick:()=>a?.("offer"),children:(0,i.jsx)(n.nO,{title:l("status.offer","Offer"),value:s.offer,icon:(0,i.jsx)(c,{name:"offer"})})}),(0,i.jsx)(n.rk,{onClick:()=>a?.("rejected"),children:(0,i.jsx)(n.nO,{title:l("status.rejected","Rejected"),value:s.rejected,icon:(0,i.jsx)(c,{name:"rejected"})})})]})]})}function m({label:e,value:t}){return(0,i.jsxs)("div",{className:"rounded-lg border border-border bg-background p-3",children:[(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:e}),(0,i.jsx)("div",{className:"mt-1 text-lg font-semibold text-foreground",children:t})]})}function f({summary:e,size:t,stroke:s}){const{t:d}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),[l,c]=(0,a.useState)(()=>"undefined"==typeof window?1024:window.innerWidth);(0,a.useEffect)(()=>{const e=()=>c(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const u=(0,a.useMemo)(()=>l<=360?{size:200,stroke:14}:l<=640?{size:220,stroke:15}:{size:240,stroke:16},[l]),m=t??u.size,f=s??u.stroke,p=e.new+e.applied+e.interview+e.offer+e.rejected;return(0,i.jsx)(o.Z,{padding:"md",className:"rounded-3xl p-4 sm:p-6",children:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(n.V6,{title:d("pipeline.title","Applications pipeline"),totalLabel:d("pipeline.totalLabel","In pipeline"),centerTop:`${p}`,centerBottom:d("pipeline.centerBottom","of {{total}} total",{total:e.total}),size:m,stroke:f,slices:[{label:d("status.new","New"),value:e.new,className:"stroke-sky-500"},{label:d("status.applied","Applied"),value:e.applied,className:"stroke-blue-500"},{label:d("status.interview","Interview"),value:e.interview,className:"stroke-purple-500"},{label:d("status.offer","Offer"),value:e.offer,className:"stroke-emerald-500"},{label:d("status.rejected","Rejected"),value:e.rejected,className:"stroke-red-500"}]})})})}function p(e){switch(e){case"new":return"border-sky-200 bg-sky-50 text-sky-700 dark:border-sky-900/50 dark:bg-sky-950/40 dark:text-sky-200";case"saved":return"border-amber-200 bg-amber-50 text-amber-700 dark:border-amber-900/50 dark:bg-amber-950/40 dark:text-amber-200";case"applied":return"border-blue-200 bg-blue-50 text-blue-700 dark:border-blue-900/50 dark:bg-blue-950/40 dark:text-blue-200";case"interview":return"border-purple-200 bg-purple-50 text-purple-700 dark:border-purple-900/50 dark:bg-purple-950/40 dark:text-purple-200";case"offer":return"border-emerald-200 bg-emerald-50 text-emerald-700 dark:border-emerald-900/50 dark:bg-emerald-950/40 dark:text-emerald-200";case"rejected":return"border-red-200 bg-red-50 text-red-700 dark:border-red-900/50 dark:bg-red-950/40 dark:text-red-200";default:return"border-border bg-muted text-foreground"}}function x({jobs:e,onViewAll:t,onOpenJob:s,className:d}){const{t:l}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),[c]=(0,a.useState)(()=>Date.now()),u=(e,t,s)=>String(l(e,{defaultValue:t,...s??{}}));return(0,i.jsxs)(o.Z,{padding:"md",className:["flex h-full flex-col rounded-3xl",d].filter(Boolean).join(" "),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"text-base font-semibold text-foreground",children:u("recent.title","Recent applications")}),(0,i.jsx)(n.$n,{variant:"link",className:"px-0",onClick:t,children:u("recent.viewAll","View all")})]}),0===e.length?(0,i.jsx)("div",{className:"mt-3 text-sm text-muted-foreground",children:u("recent.empty","No applications yet. Add your first one to see activity here.")}):(0,i.jsx)("div",{className:"mt-4 flex-1 space-y-2 overflow-y-auto pr-1",children:e.map(e=>{const r=function(e,t,s){if(!t)return null;const r=s-t;if(r<0)return e("recent.time.justNow","just now");const n=Math.floor(r/1e3);if(n<60)return e("recent.time.justNow","just now");const o=Math.floor(n/60);if(o<60)return e("recent.time.minutesAgo","{{count}}m ago",{count:o});const a=Math.floor(o/60);if(a<24)return e("recent.time.hoursAgo","{{count}}h ago",{count:a});const i=Math.floor(a/24);if(i<7)return e("recent.time.daysAgo","{{count}}d ago",{count:i});const d=Math.floor(i/7);if(d<5)return e("recent.time.weeksAgo","{{count}}w ago",{count:d});const l=Math.floor(i/30);return l<12?e("recent.time.monthsAgo","{{count}}mo ago",{count:l}):e("recent.time.yearsAgo","{{count}}y ago",{count:Math.floor(i/365)})}(u,function(e){if(!e)return null;if("function"==typeof e.toMillis)return e.toMillis();if("number"==typeof e)return e;const t=e.seconds;return"number"==typeof t?1e3*t:null}(e.createdAt),c),n=function(e){const t="string"==typeof e?e.trim().toLowerCase():"";return"new"===t?"new":"saved"===t?"saved":"applied"===t?"applied":"interview"===t?"interview":"offer"===t?"offer":"rejected"===t?"rejected":"unknown"}(e.status),o="unknown"===n?u("status.unknown","Unknown"):u(`status.${n}`,n);return(0,i.jsx)("button",{type:"button",onClick:()=>s?s(e.id):t(),className:["w-full text-left","rounded-lg border border-border bg-background p-3","transition-colors","hover:bg-muted","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border","cursor-pointer"].join(" "),children:(0,i.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("div",{className:"truncate text-sm font-medium text-foreground",children:e.title||u("recent.untitled","Untitled role")}),(0,i.jsx)("div",{className:"truncate text-xs text-muted-foreground",children:e.company||u("recent.company","Company")})]}),(0,i.jsxs)("div",{className:"shrink-0 text-right",children:[(0,i.jsx)("div",{className:["inline-flex rounded-full border px-2 py-0.5 text-xs font-medium",p(n)].join(" "),children:o}),r&&(0,i.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground",children:[u("recent.created","Created"),"Â ",r]})]})]})},e.id)})})]})}function h({hasJobs:e,onGoProfile:t,onGoQuestions:s,onGoLoop:o,onGoJobs:a,className:d}){const{t:l}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),u=l("common.go"),m=l("common.done");return(0,i.jsx)("div",{className:d,children:(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:max-w-[520px]",children:[(0,i.jsx)(n.bj,{icon:(0,i.jsx)(c,{name:"user"}),title:l("onboarding.setupProfile"),onGo:t,goText:u,doneText:m}),(0,i.jsx)(n.bj,{icon:(0,i.jsx)(c,{name:"question"}),title:l("onboarding.answerQuestions"),onGo:s,goText:u,doneText:m}),(0,i.jsx)(n.bj,{icon:(0,i.jsx)(c,{name:"loop"}),title:l("onboarding.startFirstLoop"),onGo:o,goText:u,doneText:m}),(0,i.jsx)(n.bj,{icon:(0,i.jsx)(c,{name:"add"}),title:l(e?"onboarding.addAnotherJob":"onboarding.addFirstJob"),onGo:a,goText:u,doneText:m})]})})}var b=s(99653);function g({open:e,onOpenChange:t,loops:s,value:o,onChange:d}){const{t:l}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),c="all"===o.mode,u=a.useMemo(()=>{return"selected"!==o.mode?[]:(e=o.selectedLoopIds,Array.from(new Set(e)));var e},[o]),m=a.useCallback(()=>{d({mode:"all"})},[d]),f=a.useCallback(()=>{d({mode:"selected",selectedLoopIds:u})},[d,u]),p=a.useCallback(e=>{const t=new Set(u);t.has(e)?t.delete(e):t.add(e),d({mode:"selected",selectedLoopIds:Array.from(t)})},[d,u]),x=a.useCallback(()=>{d({mode:"selected",selectedLoopIds:s.map(e=>e.id)})},[s,d]),h=a.useCallback(()=>{d({mode:"selected",selectedLoopIds:[]})},[d]);return(0,i.jsx)(n.aF,{open:e,onOpenChange:t,title:l("loopsFilter.title","Dashboard loops"),description:l("loopsFilter.desc","Choose which loops should be included in dashboard stats and recent jobs."),size:"md",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("label",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"radio",name:"dashboard-loops-filter",checked:c,onChange:m}),(0,i.jsx)("span",{className:"text-sm text-foreground",children:l("loopsFilter.all","All loops")})]}),(0,i.jsxs)("label",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"radio",name:"dashboard-loops-filter",checked:!c,onChange:f}),(0,i.jsx)("span",{className:"text-sm text-foreground",children:l("loopsFilter.selected","Only selected loops")})]})]}),c?null:(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,i.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:x,children:l("loopsFilter.selectAll","Select all")}),(0,i.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:h,children:l("loopsFilter.clear","Clear")}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground",children:[l("loopsFilter.selectedCount","Selected"),": ",u.length]})]}),(0,i.jsx)("div",{className:"rounded-xl border border-border bg-card",children:0===s.length?(0,i.jsx)("div",{className:"p-4 text-sm text-muted-foreground",children:l("loopsFilter.noLoops","No loops found.")}):(0,i.jsx)("ul",{className:"divide-y divide-border",children:s.map(e=>{const t=u.includes(e.id);return(0,i.jsx)("li",{className:"p-3",children:(0,i.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,i.jsx)("input",{type:"checkbox",checked:t,onChange:()=>p(e.id)}),(0,i.jsx)("span",{className:(0,b.xW)("text-sm",t?"text-foreground":"text-muted-foreground"),children:e.name})]})},e.id)})})})]}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(n.$n,{size:"sm",shape:"pill",onClick:()=>t(!1),children:l("common.done","Done")})})]})})}var v=s(3433),j=s(3626);const w=[{to:j.RU[j.Sb.DASHBOARD],labelKey:"tabs.overview",fallback:"Overview",end:!0},{to:j.RU[j.Sb.DASHBOARD_ANALYTICS],labelKey:"tabs.analytics",fallback:"Analytics"},{to:j.RU[j.Sb.DASHBOARD_ACTIVITY],labelKey:"tabs.activity",fallback:"Activity"}];function y(){const{t:e}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"});return(0,i.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:w.map(t=>(0,i.jsx)(v.k2,{to:t.to,end:t.end,className:({isActive:e})=>["rounded-full border px-3 py-1 text-xs font-medium transition",e?"border-foreground/30 bg-muted text-foreground":"border-border text-muted-foreground hover:bg-muted/60"].join(" "),children:e(t.labelKey,t.fallback)},t.to))})}const k=["applied","interview","offer","rejected"],N={applied:"rgb(14 165 233)",interview:"rgb(139 92 246)",offer:"rgb(16 185 129)",rejected:"rgb(244 63 94)"};function A(e){const t=Number(e);return Number.isFinite(t)?t:0}function M(e,t,s){const r=new Date(e);return"12m"===s?new Intl.DateTimeFormat(t,{month:"short"}).format(r):"7d"===s?new Intl.DateTimeFormat(t,{weekday:"short"}).format(r):new Intl.DateTimeFormat(t,{day:"2-digit",month:"short"}).format(r)}var S=s(44653),C=s(66691),D=s(69107),T=s(77984),I=s(23495),F=s(78687),L=s(86279);function O({active:e,payload:t,label:s}){const{t:n}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"});if(!e||!t||0===t.length)return null;const o="string"==typeof s?s:String(s??""),a=t.filter(e=>k.includes(e.dataKey)).map(e=>{const t=e.dataKey;return{key:t,label:String(n(`status.${t}`,{defaultValue:t})),value:A(e.value)}}).sort((e,t)=>k.indexOf(e.key)-k.indexOf(t.key));return(0,i.jsxs)("div",{className:"min-w-[220px] rounded-xl border border-border bg-background/95 p-3 shadow-md backdrop-blur",children:[(0,i.jsx)("div",{className:"text-xs font-semibold text-foreground",children:o}),(0,i.jsx)("div",{className:"mt-2 space-y-2",children:a.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between gap-3 text-xs",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:N[e.key]}}),(0,i.jsx)("span",{className:"text-muted-foreground",children:e.label})]}),(0,i.jsx)("span",{className:"font-semibold text-foreground",children:e.value})]},e.key))})]})}function $({data:e,activeSeries:t,visible:s,hoverKey:r}){function n(e){return s[e]?r?r===e?1:.18:"applied"===e||"offer"===e?.85:1:0}function o(e){return r===e?3:2.2}return(0,i.jsx)("div",{className:"h-[260px]",children:(0,i.jsx)(S.u,{width:"100%",height:"100%",children:(0,i.jsxs)(C.b,{data:e,margin:{top:8,right:12,left:6,bottom:8},children:[(0,i.jsx)(D.d,{strokeDasharray:"3 3",vertical:!1}),(0,i.jsx)(T.W,{dataKey:"date",tickLine:!1,axisLine:!1,interval:"preserveStartEnd",minTickGap:24,tick:{fontSize:12}}),(0,i.jsx)(I.h,{tickLine:!1,axisLine:!1,width:42,allowDecimals:!1,tick:{fontSize:12}}),(0,i.jsx)(F.m,{cursor:{strokeDasharray:"3 3"},content:({active:e,payload:t,label:s})=>(0,i.jsx)(O,{active:e,payload:t,label:s})}),t.includes("applied")&&(0,i.jsx)(L.N,{type:"monotone",dataKey:"applied",stroke:N.applied,strokeWidth:o("applied"),strokeOpacity:n("applied"),dot:!1,activeDot:{r:4},isAnimationActive:!1}),t.includes("offer")&&(0,i.jsx)(L.N,{type:"monotone",dataKey:"offer",stroke:N.offer,strokeWidth:o("offer"),strokeOpacity:n("offer"),dot:!1,activeDot:{r:4},isAnimationActive:!1}),t.includes("interview")&&(0,i.jsx)(L.N,{type:"monotone",dataKey:"interview",stroke:N.interview,strokeWidth:o("interview"),strokeOpacity:n("interview"),strokeDasharray:"6 4",dot:!1,activeDot:{r:4},isAnimationActive:!1}),t.includes("rejected")&&(0,i.jsx)(L.N,{type:"monotone",dataKey:"rejected",stroke:N.rejected,strokeWidth:o("rejected"),strokeOpacity:n("rejected"),strokeDasharray:"6 4",dot:!1,activeDot:{r:4},isAnimationActive:!1})]})})})}const B={applied:"Applied",interview:"Interview",offer:"Offer",rejected:"Rejected"};function z({visible:e,hoverKey:t,onToggle:s,onHover:r}){return(0,i.jsx)("div",{className:"mt-4 flex flex-wrap gap-3",children:k.map(o=>(0,i.jsxs)(n.$n,{variant:e[o]?"outline":"ghost",size:"sm",shape:"pill",shadow:"none",onMouseEnter:()=>r(o),onMouseLeave:()=>r(null),onClick:()=>s(o),className:["h-8 gap-2 px-3 text-xs transition",e[o]?"text-muted-foreground hover:text-foreground":"text-muted-foreground/60 hover:text-foreground",t===o?"ring-1 ring-foreground/10":""].join(" "),"aria-pressed":e[o],children:[(0,i.jsx)("span",{className:["h-2.5 w-2.5 rounded-full",e[o]?"opacity-100":"opacity-40"].join(" "),style:{backgroundColor:N[o]}}),(0,i.jsx)("span",{className:"whitespace-nowrap",children:B[o]})]},o))})}function U(e){if(null==e)return null;if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){const t=Date.parse(e);return Number.isFinite(t)?t:null}const t=e;if(t&&"function"==typeof t.toMillis){const e=t.toMillis();return"number"==typeof e&&Number.isFinite(e)?e:null}return t&&"number"==typeof t.seconds?Math.round(1e3*t.seconds):null}function R(e,t){const s=Math.abs(t-e);return Math.round(s/864e5)}function V(e){const t=e.filter(e=>Number.isFinite(e)).sort((e,t)=>e-t);if(0===t.length)return null;const s=Math.floor(t.length/2);return t.length%2==1?t[s]:Math.round((t[s-1]+t[s])/2)}function E(e){return"new"===e||"saved"===e||"applied"===e||"interview"===e||"offer"===e||"rejected"===e?e:"new"}function G(){return{new:0,saved:0,applied:0,interview:0,offer:0,rejected:0}}function K(e){const t=new Date(e);return t.setHours(0,0,0,0),t.getTime()}function P(e){const t=new Date(K(e)),s=(t.getDay()+6)%7;return t.setDate(t.getDate()-s),t.getTime()}function Z(e,t){const s=new Date(e);return new Intl.DateTimeFormat(t,{month:"short",day:"2-digit"}).format(s)}function H(e,t){const s=new Date(e);return new Intl.DateTimeFormat(t,{month:"short"}).format(s)}function J(e,t){const s=new Date(e);return new Intl.DateTimeFormat(t,{month:"short",day:"2-digit"}).format(s)}function W(e){const{matches:t,range:s,mode:r,locale:n}=e;return(0,a.useMemo)(()=>{const e="updated"===r;return"12m"===s?function(e,t){const s=new Date;s.setHours(0,0,0,0);const r=new Date(s.getFullYear(),s.getMonth()+1,1).getTime(),n=new Date(s.getFullYear(),s.getMonth()-(t.months-1),1),o=n.getTime(),a=[];for(let e=0;e<t.months;e++){const s=new Date(n.getFullYear(),n.getMonth()+e,1),r=s.getTime(),o=new Date(s.getFullYear(),s.getMonth()+1,1).getTime();a.push({label:H(r,t.locale),startMs:r,endMs:o,counts:G()})}for(const s of e){const e=U(t.byUpdatedAt?s.updatedAt:s.createdAt);if(null==e)continue;if(e<o||e>=r)continue;const i=new Date(e),d=a[12*(i.getFullYear()-n.getFullYear())+(i.getMonth()-n.getMonth())];if(!d)continue;const l=E(s.status);d.counts[l]+=1}return a}(t,{months:12,byUpdatedAt:e,locale:n}):"7d"===s?function(e,t){const s=K(Date.now())+864e5,r=s-24*t.days*60*60*1e3,n=[];for(let e=0;e<t.days;e++){const s=r+24*e*60*60*1e3,o=s+864e5;n.push({label:Z(s,t.locale),startMs:s,endMs:o,counts:G()})}for(const o of e){const e=U(t.byUpdatedAt?o.updatedAt:o.createdAt);if(null==e)continue;if(e<r||e>=s)continue;const a=n[Math.floor((K(e)-r)/864e5)];if(!a)continue;const i=E(o.status);a.counts[i]+=1}return n}(t,{days:7,byUpdatedAt:e,locale:n}):function(e,t){const s=P(Date.now())+6048e5,r=s-7*t.weeks*24*60*60*1e3,n=[];for(let e=0;e<t.weeks;e++){const s=r+7*e*24*60*60*1e3,o=s+6048e5;n.push({label:J(s,t.locale),startMs:s,endMs:o,counts:G()})}for(const o of e){const e=U(t.byUpdatedAt?o.updatedAt:o.createdAt);if(null==e)continue;if(e<r||e>=s)continue;const a=n[Math.floor((P(e)-r)/6048e5)];if(!a)continue;const i=E(o.status);a.counts[i]+=1}return n}(t,"30d"===s?{weeks:5,byUpdatedAt:e,locale:n}:{weeks:13,byUpdatedAt:e,locale:n})},[t,s,r,n])}function Y({active:e,children:t,onClick:s}){return(0,i.jsx)(n.$n,{onClick:s,variant:e?"secondary":"ghost",size:"sm",shape:"pill",shadow:"none",className:["h-9 px-3 text-xs",e?"text-foreground":"text-muted-foreground hover:text-foreground"].join(" "),children:t})}function _({children:e}){return(0,i.jsx)("div",{className:"flex items-center gap-1 rounded-full border bg-background p-1",children:e})}function q({matches:e}){const{t,i18n:s}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),[o,d]=(0,a.useState)("90d"),[l,c]=(0,a.useState)("created"),[u,m]=(0,a.useState)({applied:!0,interview:!0,offer:!0,rejected:!0}),[f,p]=(0,a.useState)(null),x=function(e){const{buckets:t,locale:s,range:r}=e;return(0,a.useMemo)(()=>t.map(e=>({date:M(e.startMs,s,r),applied:A(e.counts.applied),interview:A(e.counts.interview),offer:A(e.counts.offer),rejected:A(e.counts.rejected)})),[t,s,r])}({buckets:W({matches:e,range:o,mode:l,locale:s.language}),range:o,locale:s.language}),h=function(e){return(0,a.useMemo)(()=>e.reduce((e,t)=>e+t.applied+t.interview+t.offer+t.rejected,0),[e])}(x),b=(0,a.useMemo)(()=>`${String("updated"===l?t("trends.mode.updated",{defaultValue:"By last update"}):t("trends.mode.created",{defaultValue:"By creation date"}))} Â· ${String(t(`range.${o}`,{defaultValue:o}))}`,[l,o,t]),g=(0,a.useMemo)(()=>{const e=k.filter(e=>u[e]);return 0===e.length?k:e},[u]);return(0,i.jsxs)(n.Zp,{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-foreground",children:String(t("trends.title",{defaultValue:"Trends"}))}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:b})]}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,i.jsx)(_,{children:["7d","30d","90d","12m"].map(e=>(0,i.jsx)(Y,{active:o===e,onClick:()=>d(e),children:String(t(`range.${e}`,{defaultValue:e}))},e))}),(0,i.jsx)("div",{className:"mx-1 hidden h-6 w-px bg-border sm:block"}),(0,i.jsxs)(_,{children:[(0,i.jsx)(Y,{active:"created"===l,onClick:()=>c("created"),children:String(t("trends.created",{defaultValue:"Created"}))}),(0,i.jsx)(Y,{active:"updated"===l,onClick:()=>c("updated"),children:String(t("trends.updated",{defaultValue:"Updated"}))})]})]})]}),(0,i.jsx)("div",{className:"mt-6",children:0===h?(0,i.jsx)("div",{className:"flex min-h-[260px] items-center justify-center rounded-2xl border bg-muted/20 px-6 py-10 text-center",children:(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-foreground",children:String(t("trends.emptyTitle",{defaultValue:"No data yet"}))}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:String(t("trends.emptySubtitle",{defaultValue:"Add jobs and update statuses to see trends here."}))})]})}):(0,i.jsx)("div",{className:"rounded-2xl border bg-background p-3",children:(0,i.jsx)($,{data:x,activeSeries:g,visible:u,hoverKey:f})})}),h>0&&(0,i.jsx)(z,{visible:u,hoverKey:f,onToggle:function(e){m(t=>({...t,[e]:!t[e]}))},onHover:p})]})}const Q=["applied","interview","offer","rejected"];function X(e,t){return t<=0?0:Math.round(e/t*100)}function ee({matches:e}){const{t}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),s=(0,v.Zp)(),[o]=(0,a.useState)(()=>Date.now()),d=(0,a.useMemo)(()=>{const t={new:0,saved:0,applied:0,interview:0,offer:0,rejected:0};for(const s of e)t[s.status]+=1;return t},[e]),l=(0,a.useMemo)(()=>{const t=[];for(const s of e){if("interview"!==s.status)continue;const e=U(s.createdAt),r=U(s.updatedAt);e&&r&&t.push(R(e,r))}return V(t)},[e]),c=(0,a.useMemo)(()=>{const t=[];for(const s of e){if("offer"!==s.status)continue;const e=U(s.createdAt),r=U(s.updatedAt);e&&r&&t.push(R(e,r))}return V(t)},[e]),u=(0,a.useMemo)(()=>{const t={new:0,saved:0,applied:0,interview:0,offer:0,rejected:0};for(const s of e){if(!Q.includes(s.status))continue;const e=U(s.updatedAt)||U(s.createdAt);e&&(R(e,o)>=14&&(t[s.status]+=1))}return t},[e,o]),m=X(d.interview+d.offer+d.rejected,d.applied+d.interview+d.offer+d.rejected),f=X(d.offer,d.interview+d.offer);return(0,i.jsxs)(n.Zp,{className:"p-6",children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-foreground",children:t("insights.title","Insights")}),(0,i.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-3",children:[(0,i.jsx)(te,{label:t("insights.kpi.appliedToInterview","Applied â†’ Interview"),value:`${m}%`}),(0,i.jsx)(te,{label:t("insights.kpi.interviewToOffer","Interview â†’ Offer"),value:`${f}%`}),(0,i.jsx)(te,{label:t("insights.kpi.medianToInterview","Median to Interview"),value:null==l?"â€”":`${l}d`}),(0,i.jsx)(te,{label:t("insights.kpi.medianToOffer","Median to Offer"),value:null==c?"â€”":`${c}d`}),(0,i.jsx)(te,{label:t("insights.kpi.stale","Needs attention"),value:`${u.applied+u.interview+u.offer+u.rejected}`})]}),(0,i.jsxs)("div",{className:"mt-5 rounded-xl border border-border bg-muted/30 p-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-foreground",children:t("insights.actions.title","Next actions")}),(0,i.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,i.jsx)(se,{label:t("insights.actions.staleApplied","Applied without updates (14+ days)"),count:u.applied,onGo:()=>s(`${j.RU[j.Sb.MATCHES]}?status=applied`),cta:t("insights.actions.view","View")}),(0,i.jsx)(se,{label:t("insights.actions.staleInterview","Interview without updates (14+ days)"),count:u.interview,onGo:()=>s(`${j.RU[j.Sb.MATCHES]}?status=interview`),cta:t("insights.actions.view","View")}),(0,i.jsx)(se,{label:t("insights.actions.staleOffer","Offers to follow up (14+ days)"),count:u.offer,onGo:()=>s(`${j.RU[j.Sb.MATCHES]}?status=offer`),cta:t("insights.actions.view","View")})]})]}),(0,i.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,i.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:()=>s(j.RU[j.Sb.MATCHES]),children:t("insights.actions.openAll","Open all")}),(0,i.jsx)(n.$n,{size:"sm",variant:"default",shape:"pill",onClick:()=>s(j.RU[j.Sb.SETTINGS_PROFILE]),children:t("pipeline.profileCta.button")})]})]})}function te({label:e,value:t}){return(0,i.jsxs)("div",{className:"rounded-xl border border-border bg-background px-4 py-3",children:[(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:e}),(0,i.jsx)("div",{className:"mt-1 text-lg font-semibold text-foreground",children:t})]})}function se({label:e,count:t,cta:s,onGo:r}){return(0,i.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,i.jsx)("div",{className:"min-w-0",children:(0,i.jsx)("div",{className:"truncate text-sm text-foreground",children:e})}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"min-w-[24px] text-right text-sm text-muted-foreground",children:t}),(0,i.jsx)("button",{type:"button",onClick:r,className:"rounded-full border border-border bg-background px-3 py-1 text-xs text-foreground hover:bg-muted",children:s})]})]})}const re={new:"#111827",saved:"#6B7280",applied:"#3B82F6",interview:"#8B5CF6",offer:"#10B981",rejected:"#EF4444"};function ne({matches:e,days:t=14,className:s}){const{t:o,i18n:d}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),l=(0,v.Zp)(),[c]=(0,a.useState)(()=>Date.now()),u=(0,a.useMemo)(()=>e.map(e=>{const t=U(e.updatedAt)||U(e.createdAt),s=E(e.status);return{id:e.id,title:e.title??null,company:e.company??null,status:s,when:t}}).filter(e=>null!=e.when&&R(e.when,c)<=t).sort((e,t)=>t.when-e.when).slice(0,24),[e,t,c]);return(0,i.jsxs)(n.Zp,{className:["flex h-full flex-col p-6",s].filter(Boolean).join(" "),children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-foreground",children:o("timeline.title","Timeline")}),(0,i.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:o("timeline.subtitle","Last {{days}} days",{days:t})})]}),(0,i.jsx)(n.$n,{size:"sm",variant:"outline",shape:"pill",onClick:()=>l(j.RU[j.Sb.MATCHES]),children:o("timeline.viewAll","View all")})]}),0===u.length?(0,i.jsx)("div",{className:"mt-4 text-sm text-muted-foreground",children:o("timeline.empty","No recent updates")}):(0,i.jsx)("div",{className:"mt-4 flex-1 space-y-3 overflow-y-auto pr-1",children:u.map(e=>(0,i.jsxs)("button",{type:"button",className:"w-full rounded-lg border border-border bg-background p-3 text-left transition hover:bg-muted/40",onClick:()=>l(`${j.RU[j.Sb.MATCHES]}/${e.id}`),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("div",{className:"truncate text-sm font-medium text-foreground",children:e.title||o("recent.untitled","Untitled")}),(0,i.jsx)("div",{className:"mt-0.5 truncate text-xs text-muted-foreground",children:e.company||o("recent.noCompany","No company")})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:re[e.status]}}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground",children:o(`status.${e.status}`,e.status)})]})]}),(0,i.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:new Date(e.when).toLocaleDateString(d.language,{year:"numeric",month:"short",day:"2-digit"})})]},e.id))})]})}const oe=["applied","interview","offer","rejected"],ae={new:"#111827",saved:"#6B7280",applied:"#3B82F6",interview:"#8B5CF6",offer:"#10B981",rejected:"#EF4444"};function ie({matches:e}){const{t}=(0,r.Bd)(void 0,{keyPrefix:"dashboard"}),s=(0,a.useMemo)(()=>{const t={new:0,saved:0,applied:0,interview:0,offer:0,rejected:0};for(const s of e)oe.includes(s.status)&&(t[s.status]+=1);return t},[e]),o=s.applied+s.interview+s.offer+s.rejected,d=(0,a.useMemo)(()=>oe.map(e=>({key:e,label:t(`status.${e}`,e)})),[t]),l=(0,a.useMemo)(()=>{const e={new:0,saved:0,applied:o?s.applied/o:0,interview:o?s.interview/o:0,offer:o?s.offer/o:0,rejected:o?s.rejected/o:0};return[{key:"mix",label:t("radar.mix","Mix"),color:"#2563EB",values:e},{key:"rejected",label:t("status.rejected","Rejected"),color:ae.rejected,values:{...e,rejected:o?s.rejected/o:0,applied:0,interview:0,offer:0,new:0,saved:0}}]},[s.applied,s.interview,s.offer,s.rejected,t,o]);return(0,i.jsxs)(n.Zp,{className:"p-6",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-foreground",children:t("radar.title","Pipeline mix")}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground",children:t("radar.subtitle","Share by status")})]}),(0,i.jsx)("div",{className:"mt-5 flex items-center justify-center",children:(0,i.jsx)(n.VW,{axes:d,series:l,size:260})}),(0,i.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:oe.map(e=>{return(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:ae[e]}}),(0,i.jsx)("span",{className:"text-muted-foreground",children:t(`status.${e}`,e)})]}),(0,i.jsxs)("span",{className:"text-foreground",children:[o?Math.round((s[(r=e,oe.includes(r)?r:"applied")]??0)/o*100):0,"%"]})]},e);var r})})]})}}}]);
//# sourceMappingURL=8012.eee26642.chunk.js.map